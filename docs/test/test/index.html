<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    测试
  
 | Hugo Book</title>



<link rel="stylesheet" href="/book.min.1a0250256273fabf0f848ed9a3c50aae344d758339cad9725e656ac71546e6f5.css">


<link rel="icon" href="/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://example.com/">Hugo Book</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2ftest\2ftest\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/"><strong>介绍</strong></a></li>
<li><a href="/register">&ldquo;寄存器&rdquo;</a></li>
<li><a href="/docs/algorithm"><strong>算法</strong></a>

<ul>
<li><a href="/docs/algorithm/term">名词</a></li>
<li><a href="/docs/algorithm/math">数学</a></li>
<li><a href="/docs/algorithm/thought">思想</a></li>
<li><a href="/docs/algorithm/data_structure">数据结构</a></li>
<li><a href="/docs/algorithm/algorithm">算法</a></li>
<li><a href="/docs/algorithm/analysis">分析</a></li>
</ul></li>
<li><a href="/docs/architecture"><strong>架构</strong></a>

<ul>
<li><a href="/docs/architecture/term">名词</a></li>
<li><a href="/docs/architecture/principle">原理</a></li>
<li><a href="/docs/architecture/performance">性能</a></li>
<li><a href="/docs/architecture/solution">方案</a></li>
<li><a href="/docs/architecture/communication">通信</a></li>
<li><a href="/docs/architecture/governance">治理</a></li>
<li><a href="/docs/architecture/ha">高可用</a></li>
<li><a href="/docs/architecture/server">服务器</a></li>
<li><a href="/docs/architecture/store">存储</a></li>
<li><a href="/docs/architecture/heartbeat">heartbeat</a></li>
<li><a href="/docs/architecture/iscsi">iscsi</a></li>
<li><a href="/docs/architecture/jetty">jetty</a></li>
<li><a href="/docs/architecture/kafka">kafka</a></li>
<li><a href="/docs/architecture/lvs">lvs</a></li>
<li><a href="/docs/architecture/netty">netty</a></li>
<li><a href="/docs/architecture/nginx">nginx</a></li>
<li><a href="/docs/architecture/nsq">nsq</a></li>
<li><a href="/docs/architecture/protobuf">protobuf</a></li>
<li><a href="/docs/architecture/rabbitmq">rabbitmq</a></li>
<li><a href="/docs/architecture/squid">squid</a></li>
<li><a href="/docs/architecture/tomcat">tomcat</a></li>
</ul></li>
<li><a href="/docs/backend"><strong>后端</strong></a>

<ul>
<li><a href="/docs/backend/term">名词</a></li>
<li><a href="/docs/backend/backend">归纳</a></li>
<li><a href="/docs/backend/hardware">硬件</a></li>
<li><a href="/docs/backend/cxf">cxf</a></li>
<li><a href="/docs/backend/dwr">dwr</a></li>
<li><a href="/docs/backend/elasticsearch">elasticsearch</a></li>
<li><a href="/docs/backend/hadoop">hadoop</a></li>
<li><a href="/docs/backend/hexo">hexo</a></li>
<li><a href="/docs/backend/hibernate">hibernate</a></li>
<li><a href="/docs/backend/hugo">hugo</a></li>
<li><a href="/docs/backend/jbpm">jbpm</a></li>
<li><a href="/docs/backend/jekyll">jekyll</a></li>
<li><a href="/docs/backend/lucene">lucene</a></li>
<li><a href="/docs/backend/mybatis">mybatis</a></li>
<li><a href="/docs/backend/nodejs">nodejs</a></li>
<li><a href="/docs/backend/shiro">shiro</a></li>
<li><a href="/docs/backend/socketio">socketio</a></li>
<li><a href="/docs/backend/spring">spring</a></li>
<li><a href="/docs/backend/struts2">struts2</a></li>
<li><a href="/docs/backend/tornado">tornado</a></li>
<li><a href="/docs/backend/interview">面试</a></li>
</ul></li>
<li><a href="/docs/db"><strong>数据库</strong></a>

<ul>
<li><a href="/docs/db/mongodb">mongodb</a></li>
<li><a href="/docs/db/mycat">mycat</a></li>
<li><a href="/docs/db/mysql">mysql</a></li>
<li><a href="/docs/db/neo4j">neo4j</a></li>
<li><a href="/docs/db/oracle">oracle</a></li>
<li><a href="/docs/db/postgre_sql">postgre sql</a></li>
<li><a href="/docs/db/redis">redis</a></li>
</ul></li>
<li><a href="/docs/design"><strong>设计</strong></a>

<ul>
<li><a href="/docs/design/code">代码</a></li>
<li><a href="/docs/design/language">语言</a></li>
<li><a href="/docs/design/media">媒体</a></li>
<li><a href="/docs/design/project">项目</a></li>
<li><a href="/docs/design/standard">规定</a></li>
</ul></li>
<li><a href="/docs/frontend"><strong>前端</strong></a>

<ul>
<li><a href="/docs/frontend/frontend">归纳</a></li>
<li><a href="/docs/frontend/angular">angular</a></li>
<li><a href="/docs/frontend/bigpipe">bigpipe</a></li>
<li><a href="/docs/frontend/bootstrap">bootstrap</a></li>
<li><a href="/docs/frontend/cocos2dx">cocos2dx</a></li>
<li><a href="/docs/frontend/createjs">createjs</a></li>
<li><a href="/docs/frontend/d3">d3</a></li>
<li><a href="/docs/frontend/extjs">extjs</a></li>
<li><a href="/docs/frontend/fis">fis</a></li>
<li><a href="/docs/frontend/grunt">grunt</a></li>
<li><a href="/docs/frontend/gulp">gulp</a></li>
<li><a href="/docs/frontend/jquery">jquery</a></li>
<li><a href="/docs/frontend/react">react</a></li>
<li><a href="/docs/frontend/threejs">three.js</a></li>
<li><a href="/docs/frontend/webpack">webpack</a></li>
</ul></li>
<li><a href="/docs/ops"><strong>运维</strong></a>

<ul>
<li><a href="/docs/ops/ops">运维</a></li>
<li><a href="/docs/ops/ant">ant</a></li>
<li><a href="/docs/ops/archlinux">archlinux</a></li>
<li><a href="/docs/ops/cron">cron</a></li>
<li><a href="/docs/ops/docker">docker</a></li>
<li><a href="/docs/ops/git">git</a></li>
<li><a href="/docs/ops/kvm">kvm</a></li>
<li><a href="/docs/ops/linux">linux</a></li>
<li><a href="/docs/ops/maven">maven</a></li>
<li><a href="/docs/ops/pm2">pm2</a></li>
<li><a href="/docs/ops/ssh">ssh</a></li>
<li><a href="/docs/ops/svn">svn</a></li>
<li><a href="/docs/ops/virtualbox">virtualbox</a></li>
<li><a href="/docs/ops/vmware">vmware</a></li>
<li><a href="/docs/ops/vsftp">vsftp</a></li>
</ul></li>
<li><a href="/docs/pl"><strong>程序语言</strong></a>

<ul>
<li><a href="/docs/pl/language">归纳</a></li>
<li><a href="/docs/pl/principle">原理</a></li>
<li><a href="/docs/pl/parser">编译</a></li>
<li><a href="/docs/pl/go">go</a></li>
<li><a href="/docs/pl/js">js</a></li>
<li><a href="/docs/pl/java">java</a></li>
<li><a href="/docs/pl/javaweb">javaweb</a></li>
<li><a href="/docs/pl/python">python</a></li>
<li><a href="/docs/pl/haskell">haskell</a></li>
<li><a href="/docs/pl/lisp">lisp</a></li>
<li><a href="/docs/pl/css">css</a></li>
<li><a href="/docs/pl/c">c</a></li>
<li><a href="/docs/pl/clojure">clojure</a></li>
<li><a href="/docs/pl/cpp">cpp</a></li>
<li><a href="/docs/pl/elixir">elixir</a></li>
<li><a href="/docs/pl/erlang">erlang</a></li>
<li><a href="/docs/pl/lua">lua</a></li>
<li><a href="/docs/pl/perl">perl</a></li>
<li><a href="/docs/pl/php">php</a></li>
<li><a href="/docs/pl/prolog">prolog</a></li>
<li><a href="/docs/pl/r">r</a></li>
<li><a href="/docs/pl/ruby">ruby</a></li>
<li><a href="/docs/pl/rust">rust</a></li>
<li><a href="/docs/pl/scala">scala</a></li>
<li><a href="/docs/pl/scheme">scheme</a></li>
<li><strong><em>标记语言</em></strong>

<ul>
<li><a href="/docs/pl/markup_language/html">html</a></li>
<li><a href="/docs/pl/markup_language/markdown">markdown</a></li>
<li><a href="/docs/pl/markup_language/ml">ml</a></li>
<li><a href="/docs/pl/markup_language/plantUML">plantUML</a></li>
<li><a href="/docs/pl/markup_language/xml">xml</a></li>
<li><a href="/docs/pl/markup_language/schema">schema</a></li>
<li><a href="/docs/pl/markup_language/dtd">dtd</a></li>
</ul></li>
</ul></li>
<li><a href="/docs/test"><strong>测试</strong></a>

<ul>
<li><a href="/docs/test/test">测试</a></li>
</ul></li>
<li><a href="/docs/tool"><strong>工具</strong></a>

<ul>
<li><a href="/docs/tool/tool">归纳</a></li>
<li><a href="/docs/tool/windows">windows</a></li>
<li><a href="/docs/tool/chrome">chrome</a></li>
<li><a href="/docs/tool/eclipse">eclipse</a></li>
<li><a href="/docs/tool/firefox">firefox</a></li>
<li><a href="/docs/tool/intellij_idea">intellij idea</a></li>
<li><a href="/docs/tool/loadrunner">loadrunner</a></li>
<li><a href="/docs/tool/sublime">sublime</a></li>
</ul></li>
<li><a href="/docs/management">管理</a></li>
<li><a href="/docs/media">媒体</a></li>
<li><a href="/docs/english">英语</a></li>
<li><a href="/docs/infomation">信息</a></li>
<li><a href="/about_me">关于我</a></li>
<li><a href="/posts"><strong>博客</strong></a></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    测试
  
</strong>
</header>

      
<article class="markdown">

<h1 id="分类">分类</h1>

<pre><code>功能测试
        黑盒
        灰盒
        白盒
性能测试
        压力测试
        负载测试
        基准测试
                # 统计多少时间内执行了多少次某个方法
回归测试
        # 改旧代码后，保证旧代码可用
冒烟测试
        # 功能验证，不一定是改旧代码
</code></pre>

<h1 id="cpu性能测试">cpu性能测试</h1>

<pre><code>graph-frames
subsecond offset
</code></pre>

<h1 id="接口测试">接口测试</h1>

<h2 id="工具">工具</h2>

<pre><code>loadrunner
phoenix
    介绍
            web自动化测试工具
    特点
            分布式执行
            无脚本模式执行
            无人值守模式执行
            自定模式执行
    模块
            数据维护模块
    部署模式
            server-client
                    仅windows下可用
                    socket通信
            web部署
                    server与client放到tomcat或webLogic下部署
                    http通信
                    web页面控制与监控client端执行

wireshark
siege
        siege -c 200 -r 100 http://www.google.com
                # 200并发，发送100次请求
tcpcopy
        # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中
ab
        内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到
        ab -n1000 -c100 http://www.google.com/a.html
                # 100并发, 发送1000次请求
locust
        # 外网性能测试　
http_load
        # 压测
        http_load -rate 5 -seconds 10 http://www.baidu.com
                # -p 并发
                # -f 总计访问数
                # -r 每秒访问频率
                # -s 总计访问时间
yslow
        # firefox插件，网页性能测试工具
jmeter
        # apache性能测试
gatling
        # dsl脚本, 生成报表
wrk
        # 压测
        wrk -R5000 -d10s &quot;http://internal-rope-api-1875734411.cn-north-1.elb.amazonaws.com.cn/online_agents/1&quot;
swagger
        # 文档与测试用例
fortio
        # istio压测工具
hey
        # http压测
</code></pre>

<h3 id="js">js</h3>

<pre><code>heapdump
        # 堆内存快照
jslint
supertest
        # 测http接口
sinon.js
        # 非运行测试，延时测试等
vows
        # asynchronous BDD(behaviour drven development) for Node
chai
        # js断言
mock.js
        # 模拟生成接口假数据
benchmark
    介绍
            测试代码执行性能
    使用
            var Benchmark = require('benchmark');
            var suite = new Benchmark.Suite;

            var int1 = function(str){
                    return +str;
            };
            var int2 = function(str){
                    return parseInt(str, 10);
            };
            var int3 = function(str){
                    return Number(str);
            };
            // 开始测试
            var number = '100';
            suite
            .add('+', function(){
                    int1(number);
            });
            .add('parseInt', function(){
                    int2(number);
            });
            .add('Number', function(){
                    int3(number);
            });
            .on('cycle', function(event){        // 每个测试跑完后输出信息
                    console.log(String(event.target));
            })
            .on('complete', function(){
                    console.log('Fastest is' + this.filter('fastest').pluck('name'));
            })
            .run({'async': true});                    // 这里async与时间计算有关，默认为true
travis
    介绍
            项目node版本测试，在基本依赖下跑
    使用
            在travis上授权仓库，每当push代码到github, 会自动跑测试
            配置根目录下的.travis.yml文件来配置测试内容，如
                    language: node_js
                    node_js:
                    -'0.8'
                    -'0.10'
                    -'0.11'
                    script: make test
                    services:
                            mongodb
                            # 一个使用了mongodb的nodejs应用，用0.8、0.10、0.11三个版本来跑，跑测试的命令是make test
            travis测试的项目，可以得到一个图片地址，显示项目当前的测试通过状态，把这个图片添加到项目的README中
jasmine
    介绍
            编写单元测试
    使用
            describe(&quot;A suite&quot;, function(){
                    var foo;
                    beforeEach(function(){
                            foo = 0;
                            foo += 1;
                    });
                    afterEach(function(){
                            foo = 0;
                    });
                    it(&quot;contains spec with an expectation&quot;, function(){
                            expect(true).toBe(true);
                    });
            });
should
    介绍
            兼容性测试
    安装
            npm install should --save-dev
    使用
    var should = require('should');

    user.should.have.property('name', 'jack')
            # should(user).have.property('name','jack');
    user.should.have.property('pets').with.lengthOf(4);
            # 判断数组
    should.not.exist(err);
    should.exist(result);
    result.bar.should.equal(foo);
    (5).should.be.exactly(5).and.be.a.Number();
    user.should.be.an.instanceOf(Object).and.have.property('name', 'jack');
    this.obj.should.have.property('id').which.is.a.Number();
memwatch
    介绍
            监控内存leak, stats,leak在连续5次垃圾回收后内存没释放时触发, stats事件在垃圾回收时触发

    o-&gt; 堆内存比较
    var memwatch = require('memwatch')
    var leakArray = []
    var leak = function () {
            leakArray.push('leak' + Math.random())
    }
    var hd = new memwatch.HeapDiff()
    for (var i = 0; i &lt; 10000; i++) {
            leak()
    }

    var diff = hd.end()
    console.log(JSON.stringify(diff, null, 2))
muk
    var muk = require('muk')
    before(function () {
            muk(fs, 'readFileSync', function (path, encoding) {
                    throw new Error('mock readFileSync error')
            })
            muk(fs, 'readFile', function (path, encoding, callback) {
                    process.nextTick(function () {
                            # 模拟异步
                            callback(new Error('mock readFile error'))
                    })
            })
    })

    after(function () {
            muk.restore()
    })
rewire
    介绍
            测试私有方法

    o-&gt;
    it('limit should return success', function () {
            var lib = rewire('../lib/index.js')
            var litmit = lib.__get__('limit')
            litmit(10).should.be.equal(10)
    })
mocha
    介绍
            单元测试框架
    命令
            mocha
                    # --reporters 查看所有报告样式, 默认dot, 常用spec, json, html-cov
                    # -R &lt;reporter&gt;采用某报告样式
                    # -t &lt;ms&gt;设置超时时间
    使用
            npm install -g mocha
            // package.json
            {
                    &quot;scripts&quot;: {
                            &quot;test&quot;: &quot;mocha test&quot;
                            &quot;blanket&quot;: {
                                    &quot;pattern&quot;: &quot;//^((?!(node_modules|test)).)*$/&quot;,
                                    &quot;data-cover-flags&quot;: {
                                            &quot;debug&quot;: false
                                    }
                            }
                    }
            }
            mocha test

    o-&gt; bdd风格
    describe('Array', function() {
            before(function() {})
                    # 钩子函数还有after, beforeEach, afterEach
            it('should return -1 when not present', function (done) {
                    [1,2,3].indexOf(4).should.equal(-1)
                    this.timeout(500)
                            # 500ms后超时
                    done()
                            # 用done来测试异步
            })
    })

    o-&gt; bdd风格
    suite('Array', function() {
            setup(function () {})
                    # 钩子函数还有teardown
            suite('$indexOf()', function () {
                    test('should return -1 when not present', function() {
                            assert.equal(-1, [1,2,3].indexOf(4))
                    })
            })
    })
istanbul
    介绍
            名字是依斯坦布尔，用来白盒覆盖用例测试
            支持的use cases有unit tests, browser tests, server side code embedding
    使用
            instanbul cover test.js
phantomjs
    介绍
            前端测试工具
            webkit js测试工具，支持多web标准, dom, css, json, canvas和svg
    o-&gt; 使用1
            npm install mocha-phantomjs
            mocha-phantomjs index.html

    o-&gt; 使用2
            phantomjs hello.js

            // hello.js
            console.log('Hello, world');
            phantom.exit();
browserstack
    介绍
            前端测试工具
            内建webdriver的api
    使用
            npm install browserstack-runner --save-dev
            ./node_modules/.bin/browserstack-runner init
            // browserstack.json
                    &quot;test_framework&quot;: &quot;mocha&quot;,
                    &quot;timeout&quot;: 60,
                    &quot;test_path&quot;: &quot;public/index.html&quot;
            https://www.browserstack.com/accounts/automate
                    得到username 和 access key
                    复制到browserstack.json中的username和key
            browserstack-runner
            https://www.browserstack.com/automate 查看结果
karma
    介绍
            是google Testacular的新名字，自动化完成单元测试
    使用
            npm install -g karma
            karma start
            karma init
                    # 初始化karma配置文件
            npm install karma-jasmine
jscover
    介绍
            覆盖率测试
    使用
            npm install jscover -g
            jscover lib lib-cov
                    # 把lib下的源码编译到lib-cov下，新代码在每一行加上了执行次数统计
            index.js中
                    module.exports = process.env.LIB_COV ? require('./lib-cov/index') : require('./lib/index')
            export LIB_COV=1
            mocha -R html-cov &gt; coverage.html
                    # 生成结果
blanket
    介绍
            比jscover更好的测试工具
    使用
            package.json中
                    &quot;scripts&quot;: {
                            &quot;blanket&quot;: {
                                    &quot;pattern&quot;: &quot;eventproxy/lib&quot;
                                            # 要测试的源码目录
                            }
                    }
            mocha --require blanket -R html-cov &gt; coverage.html
</code></pre>

<h3 id="python">python</h3>

<pre><code>nose
        # 注解测试
selenium
        # 自动化测试
</code></pre>

<h1 id="页面">页面</h1>

<h2 id="工具-1">工具</h2>

<pre><code>jsperf
        # js性能分析
jasmine
        # js单元测试
</code></pre>

<h1 id="移动">移动</h1>

<h2 id="工具-2">工具</h2>

<pre><code>robotium
        # android自动化测试
</code></pre>

<h1 id="数据库">数据库</h1>

<h2 id="工具-3">工具</h2>

<pre><code>sysbench 
        # mysql 压测
        --db-driver=mysql --mysql-host=visitor-bench.ctysoosgzk4k.rds.cn-north-1.amazonaws.com.cn --mysql-user=root --mysql-password=12345678 --threads=512 --events=1000000 --time=0 --report-interval=15 ./bench_visit_page_insert.lua run
</code></pre>

<h1 id="前端框架">前端框架</h1>

<pre><code>structure/behavior(数据结构/行为)问题
        # 判断是否有此耦合，用一个测试验证: 是否为应用逻辑编写一个单元测试而不需要dom结构存在
        ## angular中没有这种问题，因为所有定位元素和处理事件的工作都是在angular内部完成的
        ## 在测试时创建dom，就增加了测试的复杂性。而且页面变化时有更多维护要做。访问dom的操作很慢，测试反馈时间长
</code></pre>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="https://github.com/outrunJ/blog-hugo/commit/527b54f06fb1e4192f7f9c86cfded0cda859d1b3" title='Last modified Jun 17, 2019 by shenwenqing' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" alt="Changed" /> Jun 17, 2019
    </a>
  </div>
  
  
  <div>
    <a href="https://github.com/outrunJ/blog-hugo/tree/master/content/docs/test/test.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-6 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#分类">分类</a></li>
<li><a href="#cpu性能测试">cpu性能测试</a></li>
<li><a href="#接口测试">接口测试</a>
<ul>
<li><a href="#工具">工具</a>
<ul>
<li><a href="#js">js</a></li>
<li><a href="#python">python</a></li>
</ul></li>
</ul></li>
<li><a href="#页面">页面</a>
<ul>
<li><a href="#工具-1">工具</a></li>
</ul></li>
<li><a href="#移动">移动</a>
<ul>
<li><a href="#工具-2">工具</a></li>
</ul></li>
<li><a href="#数据库">数据库</a>
<ul>
<li><a href="#工具-3">工具</a></li>
</ul></li>
<li><a href="#前端框架">前端框架</a></li>
</ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
