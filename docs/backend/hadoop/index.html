<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Hadoop
  
 | Hugo Book</title>



<link rel="stylesheet" href="/book.min.1a0250256273fabf0f848ed9a3c50aae344d758339cad9725e656ac71546e6f5.css">


<link rel="icon" href="/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://example.com/">Hugo Book</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2f backend\2fhadoop\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/"><strong>介绍</strong></a></li>
<li><a href="/register">&ldquo;寄存器&rdquo;</a></li>
<li><a href="/docs/algorithm"><strong>算法</strong></a>

<ul>
<li><a href="/docs/algorithm/term">名词</a></li>
<li><a href="/docs/algorithm/math">数学</a></li>
<li><a href="/docs/algorithm/thought">思想</a></li>
<li><a href="/docs/algorithm/data_structure">数据结构</a></li>
<li><a href="/docs/algorithm/algorithm">算法</a></li>
<li><a href="/docs/algorithm/analysis">分析</a></li>
</ul></li>
<li><a href="/docs/architecture"><strong>架构</strong></a>

<ul>
<li><a href="/docs/architecture/term">名词</a></li>
<li><a href="/docs/architecture/principle">原理</a></li>
<li><a href="/docs/architecture/performance">性能</a></li>
<li><a href="/docs/architecture/solution">方案</a></li>
<li><a href="/docs/architecture/communication">通信</a></li>
<li><a href="/docs/architecture/governance">治理</a></li>
<li><a href="/docs/architecture/ha">高可用</a></li>
<li><a href="/docs/architecture/server">服务器</a></li>
<li><a href="/docs/architecture/store">存储</a></li>
<li><a href="/docs/architecture/heartbeat">heartbeat</a></li>
<li><a href="/docs/architecture/iscsi">iscsi</a></li>
<li><a href="/docs/architecture/jetty">jetty</a></li>
<li><a href="/docs/architecture/kafka">kafka</a></li>
<li><a href="/docs/architecture/lvs">lvs</a></li>
<li><a href="/docs/architecture/netty">netty</a></li>
<li><a href="/docs/architecture/nginx">nginx</a></li>
<li><a href="/docs/architecture/nsq">nsq</a></li>
<li><a href="/docs/architecture/protobuf">protobuf</a></li>
<li><a href="/docs/architecture/rabbitmq">rabbitmq</a></li>
<li><a href="/docs/architecture/squid">squid</a></li>
<li><a href="/docs/architecture/tomcat">tomcat</a></li>
</ul></li>
<li><a href="/docs/backend"><strong>后端</strong></a>

<ul>
<li><a href="/docs/backend/term">名词</a></li>
<li><a href="/docs/backend/backend">归纳</a></li>
<li><a href="/docs/backend/hardware">硬件</a></li>
<li><a href="/docs/backend/cxf">cxf</a></li>
<li><a href="/docs/backend/dwr">dwr</a></li>
<li><a href="/docs/backend/elasticsearch">elasticsearch</a></li>
<li><a href="/docs/backend/hadoop">hadoop</a></li>
<li><a href="/docs/backend/hexo">hexo</a></li>
<li><a href="/docs/backend/hibernate">hibernate</a></li>
<li><a href="/docs/backend/hugo">hugo</a></li>
<li><a href="/docs/backend/jbpm">jbpm</a></li>
<li><a href="/docs/backend/jekyll">jekyll</a></li>
<li><a href="/docs/backend/lucene">lucene</a></li>
<li><a href="/docs/backend/mybatis">mybatis</a></li>
<li><a href="/docs/backend/nodejs">nodejs</a></li>
<li><a href="/docs/backend/shiro">shiro</a></li>
<li><a href="/docs/backend/socketio">socketio</a></li>
<li><a href="/docs/backend/spring">spring</a></li>
<li><a href="/docs/backend/struts2">struts2</a></li>
<li><a href="/docs/backend/tornado">tornado</a></li>
<li><a href="/docs/backend/interview">面试</a></li>
</ul></li>
<li><a href="/docs/db"><strong>数据库</strong></a>

<ul>
<li><a href="/docs/db/mongodb">mongodb</a></li>
<li><a href="/docs/db/mycat">mycat</a></li>
<li><a href="/docs/db/mysql">mysql</a></li>
<li><a href="/docs/db/neo4j">neo4j</a></li>
<li><a href="/docs/db/oracle">oracle</a></li>
<li><a href="/docs/db/postgre_sql">postgre sql</a></li>
<li><a href="/docs/db/redis">redis</a></li>
</ul></li>
<li><a href="/docs/design"><strong>设计</strong></a>

<ul>
<li><a href="/docs/design/code">代码</a></li>
<li><a href="/docs/design/language">语言</a></li>
<li><a href="/docs/design/media">媒体</a></li>
<li><a href="/docs/design/project">项目</a></li>
<li><a href="/docs/design/standard">规定</a></li>
</ul></li>
<li><a href="/docs/frontend"><strong>前端</strong></a>

<ul>
<li><a href="/docs/frontend/frontend">归纳</a></li>
<li><a href="/docs/frontend/angular">angular</a></li>
<li><a href="/docs/frontend/bigpipe">bigpipe</a></li>
<li><a href="/docs/frontend/bootstrap">bootstrap</a></li>
<li><a href="/docs/frontend/cocos2dx">cocos2dx</a></li>
<li><a href="/docs/frontend/createjs">createjs</a></li>
<li><a href="/docs/frontend/d3">d3</a></li>
<li><a href="/docs/frontend/extjs">extjs</a></li>
<li><a href="/docs/frontend/fis">fis</a></li>
<li><a href="/docs/frontend/grunt">grunt</a></li>
<li><a href="/docs/frontend/gulp">gulp</a></li>
<li><a href="/docs/frontend/jquery">jquery</a></li>
<li><a href="/docs/frontend/react">react</a></li>
<li><a href="/docs/frontend/threejs">three.js</a></li>
<li><a href="/docs/frontend/webpack">webpack</a></li>
</ul></li>
<li><a href="/docs/ops"><strong>运维</strong></a>

<ul>
<li><a href="/docs/ops/ops">运维</a></li>
<li><a href="/docs/ops/ant">ant</a></li>
<li><a href="/docs/ops/archlinux">archlinux</a></li>
<li><a href="/docs/ops/cron">cron</a></li>
<li><a href="/docs/ops/docker">docker</a></li>
<li><a href="/docs/ops/git">git</a></li>
<li><a href="/docs/ops/kvm">kvm</a></li>
<li><a href="/docs/ops/linux">linux</a></li>
<li><a href="/docs/ops/maven">maven</a></li>
<li><a href="/docs/ops/pm2">pm2</a></li>
<li><a href="/docs/ops/ssh">ssh</a></li>
<li><a href="/docs/ops/svn">svn</a></li>
<li><a href="/docs/ops/virtualbox">virtualbox</a></li>
<li><a href="/docs/ops/vmware">vmware</a></li>
<li><a href="/docs/ops/vsftp">vsftp</a></li>
</ul></li>
<li><a href="/docs/pl"><strong>程序语言</strong></a>

<ul>
<li><a href="/docs/pl/language">归纳</a></li>
<li><a href="/docs/pl/principle">原理</a></li>
<li><a href="/docs/pl/parser">编译</a></li>
<li><a href="/docs/pl/go">go</a></li>
<li><a href="/docs/pl/js">js</a></li>
<li><a href="/docs/pl/java">java</a></li>
<li><a href="/docs/pl/javaweb">javaweb</a></li>
<li><a href="/docs/pl/python">python</a></li>
<li><a href="/docs/pl/haskell">haskell</a></li>
<li><a href="/docs/pl/lisp">lisp</a></li>
<li><a href="/docs/pl/css">css</a></li>
<li><a href="/docs/pl/c">c</a></li>
<li><a href="/docs/pl/clojure">clojure</a></li>
<li><a href="/docs/pl/cpp">cpp</a></li>
<li><a href="/docs/pl/elixir">elixir</a></li>
<li><a href="/docs/pl/erlang">erlang</a></li>
<li><a href="/docs/pl/lua">lua</a></li>
<li><a href="/docs/pl/perl">perl</a></li>
<li><a href="/docs/pl/php">php</a></li>
<li><a href="/docs/pl/prolog">prolog</a></li>
<li><a href="/docs/pl/r">r</a></li>
<li><a href="/docs/pl/ruby">ruby</a></li>
<li><a href="/docs/pl/rust">rust</a></li>
<li><a href="/docs/pl/scala">scala</a></li>
<li><a href="/docs/pl/scheme">scheme</a></li>
<li><strong><em>标记语言</em></strong>

<ul>
<li><a href="/docs/pl/markup_language/html">html</a></li>
<li><a href="/docs/pl/markup_language/markdown">markdown</a></li>
<li><a href="/docs/pl/markup_language/ml">ml</a></li>
<li><a href="/docs/pl/markup_language/plantUML">plantUML</a></li>
<li><a href="/docs/pl/markup_language/xml">xml</a></li>
<li><a href="/docs/pl/markup_language/schema">schema</a></li>
<li><a href="/docs/pl/markup_language/dtd">dtd</a></li>
</ul></li>
</ul></li>
<li><a href="/docs/test"><strong>测试</strong></a>

<ul>
<li><a href="/docs/test/test">测试</a></li>
</ul></li>
<li><a href="/docs/tool"><strong>工具</strong></a>

<ul>
<li><a href="/docs/tool/tool">归纳</a></li>
<li><a href="/docs/tool/windows">windows</a></li>
<li><a href="/docs/tool/chrome">chrome</a></li>
<li><a href="/docs/tool/eclipse">eclipse</a></li>
<li><a href="/docs/tool/firefox">firefox</a></li>
<li><a href="/docs/tool/intellij_idea">intellij idea</a></li>
<li><a href="/docs/tool/loadrunner">loadrunner</a></li>
<li><a href="/docs/tool/sublime">sublime</a></li>
</ul></li>
<li><a href="/docs/management">管理</a></li>
<li><a href="/docs/media">媒体</a></li>
<li><a href="/docs/english">英语</a></li>
<li><a href="/docs/infomation">信息</a></li>
<li><a href="/about_me">关于我</a></li>
<li><a href="/posts"><strong>博客</strong></a></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Hadoop
  
</strong>
</header>

      
<article class="markdown">

<h1 id="发展">发展</h1>

<pre><code>google
        gfs
        mapReduce
                # 并行计算框架
        big-table
hadoop1.0 
hdfs
        mapReduce
hadoop2.0
        hdfs
                # Hadoop Distributed File System　
        yarn
                # Yet Another Resource Negotiator资源管理调度系统
                # 在hdfs上运行计算框架(如mapReduce, storm, spark)
</code></pre>

<h1 id="原理">原理</h1>

<pre><code>hdfs
    模块
            client
            nameNode                                                # 用于注册文件
                                                                    ## 2.0后可以有多个nameNode
                    metadata                                        # 数据的描述信息
            dataNode                                                # 数据在dataNode间水平传递
    关系
            client rpc nameNode
    结构
            metadata
                    /test/a.log, 3, {blk_1,blk_2}, [{blk_1:[h0,h1,h3]},{blk_2:[h0,h2,h4]}]
mapReduce
    Map: 切分，并行计算
    Reduce: 从map中取多个计算结果，进行合并
</code></pre>

<h1 id="组件">组件</h1>

<pre><code>ambari
        # 安装、部署、配置和管理
hdfs
        # 分布式文件系统
hive
        # 数据仓库
pig
        # 数据流处理
mahout
        # 数据挖掘
mapreduce
flume
        # 日志收集
hbase
        # 实时分布式, bigtable数据库
sqoop
        # etl
zookeeper
</code></pre>

<h1 id="框架">框架</h1>

<pre><code>CDH
    cloudera
HDP
    hortonworks data platform
应用框架
    sqoop
        在hdfs(hive)与关系型数据库之间数据相互转移
    phoenix
        介绍
                打造更快的sql查询，面向hbase与hdfs之上的其它nosql数据库
        特征
                通过jdbc进行交互
    shark
        介绍
                hive on spark
        特点
                并行job处理比mapReduce快100倍
    ganglia
        分布式监控系统，用于监视和显示集群中节点的各种状态信息，如cpu, mem, 硬盘利用率, i/o负载, 网络流量等，历史数据生成曲线图，通过php页面显现。
存储框架
    hive
        功能
                将结构化的数据文件映射为一张数据库表，并提供简单的sql查询功能，可以将sql语句转换为mapReduce运行。
        缺点
                底层使用mapReduce引擎，是一个批处理过程，难以满足查询的交互性
    hbase
        特征
                分布式的，面向列的开源nosql数据库，列可以动态增加
                基于hadoop的bigTable
                不同于一般关系数据库，是一个适合于非结构化数据存储的数据库
                自动切分数据
                并发读写
        缺点
                只能按照row key来查询
                master宕机，整个系统挂掉
计算框架
    mr  
        离线计算框架
    spark
        介绍
                内存计算框架
                apache托管UC Berkeley AMP lab开源的类hadoop 通用并行框架
                mapreduce中间输出结果可以保存在内存中，不再需要读写hdfs
                是scala语言实现的
        特点
                准实时，收集成rdd后处理
                不支持事务 
        技术 
                spark rdd
                spark streaming
                spark sql
    drill
        google dremel 的开源版本
    storm
        介绍        
                实时视图计算框架
                纯实时
                支持事务
        特点
                结合kafka 
    impala
        介绍        
                实时视图计算框架
                纯实时
                支持事务
        特点
                结合kafka 
</code></pre>

<h1 id="部署">部署</h1>

<pre><code>本地模式
伪分布模式(学习用)
集群模式
例子
    软件结构
            0        jdk, hadoop                        NameNode, DFSZKFailoverController
            1        jdk, hadoop                        NameNode, DFSZKFailoverController
            2        jdk, hadoop                        ResourceManager
            3        jdk, hadoop, zookeeper        DataNode, NodeManager, JournalNode, QuorumPeerMain
            4        jdk, hadoop, zookeeper        DataNode, NodeManager, JournalNode, QuorumPeerMain
            5        jdk, hadoop, zookeeper        DataNode, NodeManager, JournalNode, QuorumPeerMain
    zookeeper
        配置conf/zoo.cfg
                tickTime=2000                        # 心跳间隔(ms)
                initLimit=10                        # 初始化时最多容忍心跳次数
                syncLimit=5                        # 同步失败最多容忍心跳次数
                dataDir=/usr/local/zookeeper/data        # 运行时文件目录
                clientPort=2181                # 运行端口号
                server.1=主机名或ip:2888:3888        # 服务运行端口与选举端口
                server.2=主机名或ip:2888:3888
                server.3=主机名或ip:2888:3888
        命令
                ./bin/zkServer.sh start
                ./bin/zkServer.sh status
                jps                                        # 显示名为QuorumPeerMain
    hadoop
        hadoop-env.sh
            export JAVA_HOME=
        core-site.xml
            &lt;configuration&gt;
                &lt;property&gt;
                        &lt;name&gt;fs.defaultFS&lt;/name&gt;
                        &lt;value&gt;hdfs://ns1&lt;/value&gt;
                &lt;/property&gt;
                &lt;property&gt;
                        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
                        &lt;value&gt;/usr/local/hadoop-2.2.0/tmp&lt;/value&gt;
                &lt;/property&gt;
                &lt;property&gt;
                        &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;
                        &lt;value&gt;192.168.56.13:2181, 192.168.56.14:2181, 192.168.56.15:2181&lt;/value&gt;
                &lt;/property&gt;
            &lt;/configuration&gt;
        hdfs-site.xml
            &lt;property&gt;
                &lt;name&gt;dfs.nameservices&lt;/name&gt;
                &lt;value&gt;ns1&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.ha.namenodes.ns1&lt;/name&gt;
                &lt;value&gt;nn1,nn2&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.namenode.rpc-address.ns1.nn1&lt;/name&gt;
                &lt;value&gt;192.168.56.10:9000&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.namenode.http-address.ns1.nn1&lt;/name&gt;
                &lt;value&gt;192.168.56.10:50070&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.namenode.rpc-address.ns1.nn2&lt;/name&gt;
                &lt;value&gt;192.168.56.11:9000&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.namenode.http-address.ns1.nn2&lt;/name&gt;
                &lt;value&gt;192.168.56.11:50070&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;
                &lt;value&gt;qjournal://192.168.56.13:8485;192.168.56.14:8485;192.168.56.15:8485&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;
                &lt;value&gt;/usr/local/hadoop-2.2.0/journal&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;
                &lt;value&gt;true&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.client.failover.proxy.provider.ns1&lt;/name&gt;
                &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;
                &lt;value&gt;sshfence&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;
                &lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt;
            &lt;/property&gt;
        mapred-site.xml
            &lt;property&gt;
                &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
                &lt;value&gt;yarn&lt;/value&gt;
            &lt;/property&gt;
        yarn-site.xml
            &lt;property&gt;
                &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
                &lt;value&gt;192.168.56.12&lt;/value&gt;
            &lt;/property&gt;
            &lt;property&gt;
                &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
                &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
            &lt;/property&gt;
        etc/hadoop/slaves
            192.168.56.13
            192.168.56.14
            192.168.56.15
    收尾
        o-&gt; ssh免登录(0到1,2,3,4,5)
                ssh-keygen -t rsa
                ssh-copy-id -i 192.168.56.11                # 这样就可以免登录访问192.168.56.11了
                                                        ## ssh-copy-id -i localhost 免登录自己

        o-&gt; 复制hadoop2.2.0(从0到1,2,3,4,5)

        o-&gt; 添加hadoop_home到环境变量
                etc/profile
                        export HADOOP_HOME=/usr/local/hadoop-2.2.0
                        export PATH=$PATH:$HADOOP_HOME/bin
    启动
        0 上启动
                ./sbin/hadoop-daemons.sh start journalnode
        0 上格式化namenode
                hadoop namenode -format
</code></pre>

<h1 id="相关">相关</h1>

<pre><code>bigTable
gfs
dremel
    介绍
            google的交互式数据分析系统，构建于gfs上
    特点
            嵌套型数据的列存储
            多层查询
            减少查询的处理数据量，提升查询效率
</code></pre>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="https://github.com/outrunJ/hugo-blog/commit/527b54f06fb1e4192f7f9c86cfded0cda859d1b3" title='Last modified Jun 17, 2019 by shenwenqing' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" alt="Changed" /> Jun 17, 2019
    </a>
  </div>
  
  
  <div>
    <a href="https://github.com/outrunJ/hugo-blog/tree/master/content/docs/backend/hadoop.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-6 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#发展">发展</a></li>
<li><a href="#原理">原理</a></li>
<li><a href="#组件">组件</a></li>
<li><a href="#框架">框架</a></li>
<li><a href="#部署">部署</a></li>
<li><a href="#相关">相关</a></li>
</ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
