<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="包 #  net-tools ifconfig  内核 #  modprobe vboxdrv # 内核 lsmod # 显示当前系统加载的模块，如systemctl中start了的模块 sysdig sysdig -c topprocs_cpu # 进程cpu top evt.cpu=0 # 只统计cpu0 topprocs_net # 进程带宽 top topprocs_file # 进程硬盘i/o top topfiles_bytes # 文件读写 top proc.name=httpd # 指定进程名 topfiles_time # 文件时间 top topprocs_errors # 进程error top topfiles_errors # 文件error top topscalls_time # 系统调用时间 top topscalls &quot;evt.failed=true&quot; # 系统调用出错 top topconns # 网络连接 top fdcount_by proc.name &quot;fd.type=file&quot; # 进程文件描述符 fdbytes_by fd.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="LinuxTool" />
<meta property="og:description" content="包 #  net-tools ifconfig  内核 #  modprobe vboxdrv # 内核 lsmod # 显示当前系统加载的模块，如systemctl中start了的模块 sysdig sysdig -c topprocs_cpu # 进程cpu top evt.cpu=0 # 只统计cpu0 topprocs_net # 进程带宽 top topprocs_file # 进程硬盘i/o top topfiles_bytes # 文件读写 top proc.name=httpd # 指定进程名 topfiles_time # 文件时间 top topprocs_errors # 进程error top topfiles_errors # 文件error top topscalls_time # 系统调用时间 top topscalls &quot;evt.failed=true&quot; # 系统调用出错 top topconns # 网络连接 top fdcount_by proc.name &quot;fd.type=file&quot; # 进程文件描述符 fdbytes_by fd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/docs/ops/tool/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2018-10-11T18:47:57&#43;08:00" />
<meta property="article:modified_time" content="2021-02-04T15:02:50&#43;08:00" />

<title>LinuxTool | outrun的笔记</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.eddc90f1d1267cb826e7cffc53c434e50061c4bfe41146a43670842ce6cb3bf6.css" integrity="sha256-7dyQ8dEmfLgm58/8U8Q05QBhxL/kEUakNnCELObLO/Y=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.c2987544f98c25b91860898eff151d7ec5d03c04f5238774aee2684572e91150.js" integrity="sha256-wph1RPmMJbkYYImO/xUdfsXQPAT1I4d0ruJoRXLpEVA=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-154152836-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <script data-ad-client="ca-pub-6239994681364905" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" /><span>outrun的笔记</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  <ul>
<li><a href="/"><strong>介绍</strong></a></li>
<li><a href="/docs/algorithm"><strong>算法</strong></a>
<ul>
<li><a href="/docs/algorithm/math">数学</a></li>
<li><a href="/docs/algorithm/thought">思想</a></li>
<li><a href="/docs/algorithm/data_structure">数据结构</a></li>
</ul>
</li>
<li><a href="/docs/design"><strong>设计</strong></a>
<ul>
<li><a href="/docs/design/drive">驱动</a></li>
<li><a href="/docs/design/biz">行业</a></li>
<li><a href="/docs/design/organize">组织</a></li>
<li><a href="/docs/design/people">人员</a></li>
<li><a href="/docs/design/project">工程</a></li>
<li><a href="/docs/design/code">代码</a></li>
<li><a href="/docs/design/design_mode">Java设计模式</a></li>
</ul>
</li>
<li><a href="/docs/pl"><strong>程序语言</strong></a>
<ul>
<li><a href="/docs/pl/principle">原理</a></li>
<li><a href="/docs/pl/go">GO</a></li>
<li><a href="/docs/pl/js">JS</a></li>
<li><a href="/docs/pl/java"><em><strong>Java</strong></em></a>
<ul>
<li><a href="/docs/pl/java/juc">Java并发</a></li>
<li><a href="/docs/pl/java/jvm">JVM</a></li>
<li><a href="/docs/pl/java/collection">Java容器</a></li>
</ul>
</li>
<li><a href="/docs/pl/python">Python</a></li>
<li><a href="/docs/pl/haskell">Haskell</a></li>
<li><a href="/docs/pl/clojure">Clojure</a></li>
<li><a href="/docs/pl/markup_language"><em><strong>标记语言</strong></em></a>
<ul>
<li><a href="/docs/pl/markup_language/html">HTML</a></li>
<li><a href="/docs/pl/markup_language/css">CSS</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/function_small"><strong>小功能</strong></a>
<ul>
<li><a href="/docs/function_small/principle">原理</a></li>
<li><a href="/docs/function_small/hibernate">Hibernate</a></li>
<li><a href="/docs/function_small/nginx">Nginx</a></li>
<li><a href="/docs/function_small/nodejs">Node.js</a></li>
<li><a href="/docs/function_small/elasticsearch">Elasticsearch</a></li>
<li><a href="/docs/function_small/spring">Spring</a></li>
<li><a href="/docs/function_small/aliyun">阿里云组件</a></li>
</ul>
</li>
<li><a href="/docs/function_big"><strong>大功能</strong></a>
<ul>
<li><a href="/docs/function_big/solution">方案</a></li>
<li><a href="/docs/function_big/javaweb">JavaWeb</a></li>
<li><a href="/docs/function_big/hadoop">Hadoop</a></li>
</ul>
</li>
<li><a href="/docs/support_service"><strong>支撑-服务</strong></a>
<ul>
<li><a href="/docs/support_service/principle">原理</a></li>
<li><a href="/docs/support_service/performance">性能</a></li>
</ul>
</li>
<li><a href="/docs/support_distributed"><strong>支撑-分布式</strong></a>
<ul>
<li><a href="/docs/support_distributed/spring_cloud">Spring Cloud</a></li>
</ul>
</li>
<li><a href="/docs/db"><strong>数据库</strong></a>
<ul>
<li><a href="/docs/db/mongodb">MongoDB</a></li>
<li><a href="/docs/db/mysql">Mysql</a></li>
<li><a href="/docs/db/oracle">Oracle</a></li>
<li><a href="/docs/db/postgresql">PgSQL</a></li>
<li><a href="/docs/db/redis">Redis</a></li>
</ul>
</li>
<li><a href="/docs/frontend"><strong>前端</strong></a>
<ul>
<li><a href="/docs/frontend/jquery">JQuery</a></li>
<li><a href="/docs/frontend/bootstrap">Bootstrap</a></li>
<li><a href="/docs/frontend/angular">Angular</a></li>
<li><a href="/docs/frontend/react">React</a></li>
<li><a href="/docs/frontend/threejs">Three.js</a></li>
</ul>
</li>
<li><a href="/docs/ops"><strong>运维</strong></a>
<ul>
<li><a href="/docs/ops/linux">Linux</a></li>
<li><a href="/docs/ops/tool">工具</a></li>
<li><a href="/docs/ops/monitor">监控</a></li>
<li><a href="/docs/ops/security">安全</a></li>
<li><a href="/docs/ops/docker">Docker</a></li>
</ul>
</li>
<li><a href="/docs/test"><strong>测试</strong></a>
<ul>
<li><a href="/docs/test/debug">调试</a></li>
</ul>
</li>
<li><a href="/docs/tool"><strong>图形工具</strong></a>
<ul>
<li><a href="/docs/tool/vim">Vim</a></li>
<li><a href="/docs/tool/eclipse">Eclipse</a></li>
<li><a href="/docs/tool/apple">Apple</a></li>
</ul>
</li>
<li><a href="/docs/misc"><strong>Misc</strong></a>
<ul>
<li><a href="/docs/misc/infomation">信息</a></li>
<li><a href="/docs/misc/media">媒体</a></li>
<li><a href="/docs/misc/english">英语</a></li>
<li><a href="/docs/misc/interview">题目</a></li>
<li><a href="/docs/misc/book">书</a></li>
</ul>
</li>
<li><a href="/docs/cache"><strong>cache</strong></a>
<ul>
<li><a href="/docs/cache/ops">运维</a></li>
<li><a href="/docs/cache/develop">开发</a></li>
</ul>
</li>
<li><a href="/posts"><strong>博客</strong></a>
<ul>
<li><a href="/about_me">关于我</a></li>
</ul>
</li>
<li><a href="/docs/template"><strong>模板配置</strong></a>
<ul>
<li><a href="/docs/template/docker">docker</a></li>
<li><a href="/docs/template/linux">linux</a></li>
<li><a href="/docs/template/awesome">awesome</a></li>
<li><a href="/docs/template/script">script</a></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>LinuxTool</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#包">包</a></li>
    <li><a href="#内核">内核</a></li>
    <li><a href="#文件">文件</a></li>
    <li><a href="#系统">系统</a></li>
    <li><a href="#查看">查看</a></li>
    <li><a href="#控制">控制</a></li>
    <li><a href="#日志">日志</a></li>
    <li><a href="#设备">设备</a>
      <ul>
        <li><a href="#硬盘">硬盘</a></li>
        <li><a href="#进程">进程</a></li>
        <li><a href="#网络">网络</a></li>
      </ul>
    </li>
    <li><a href="#调度">调度</a></li>
    <li><a href="#包管理">包管理</a></li>
    <li><a href="#init">init</a></li>
    <li><a href="#编程">编程</a></li>
    <li><a href="#媒体">媒体</a></li>
    <li><a href="#网络服务">网络服务</a></li>
    <li><a href="#图形程序">图形程序</a>
      <ul>
        <li><a href="#桌面">桌面</a>
          <ul>
            <li><a href="#gnome">gnome</a></li>
            <li><a href="#i3">i3</a></li>
            <li><a href="#awesome">awesome</a></li>
          </ul>
        </li>
        <li><a href="#显示">显示</a></li>
        <li><a href="#任务栏">任务栏</a></li>
        <li><a href="#输入法">输入法</a></li>
        <li><a href="#模拟">模拟</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="包">
  包
  <a class="anchor" href="#%e5%8c%85">#</a>
</h1>
<pre><code>net-tools
    ifconfig
</code></pre>
<h1 id="内核">
  内核
  <a class="anchor" href="#%e5%86%85%e6%a0%b8">#</a>
</h1>
<pre><code>modprobe vboxdrv                    # 内核
lsmod                               # 显示当前系统加载的模块，如systemctl中start了的模块
sysdig
    sysdig
        -c
            topprocs_cpu            # 进程cpu top
                evt.cpu=0           # 只统计cpu0
            topprocs_net            # 进程带宽 top
            topprocs_file           # 进程硬盘i/o top
            topfiles_bytes          # 文件读写 top
                proc.name=httpd     # 指定进程名
            topfiles_time           # 文件时间 top
            topprocs_errors         # 进程error top
            topfiles_errors         # 文件error top
            topscalls_time          # 系统调用时间 top
            topscalls &quot;evt.failed=true&quot;                 # 系统调用出错 top
            topconns                # 网络连接 top
            fdcount_by
                proc.name &quot;fd.type=file&quot;                # 进程文件描述符
            fdbytes_by
                fd.directory &quot;fd.type=file&quot;             # 目录读写 top
                fd.filename &quot;fd.directory=/tmp/&quot;        # /tmp目录文件 读写top
                fd.type             # fd type i/o
            echo_fds &quot;fd.filename=passwd&quot;               # 所有名为passwd文件的i/o
            stdout
                proc.name=bash      # 进程标准输出
            fileslower 1            # 文件i/o 大于1ms
            spy_users               # 命令执行情况

        -A                          # 只显示可读数据
        -s 4096                     # 指定 data buffer 字节
        -r trace.scap               #  指定trace file
        -pc                         # 详情
    csysdig                         # 交互式工具
        -vcontainers                # 容器资源
        -pc                         # 详情
</code></pre>
<h1 id="文件">
  文件
  <a class="anchor" href="#%e6%96%87%e4%bb%b6">#</a>
</h1>
<pre><code>rename 's/\.bak$//' *.bak           # 重命名
rm -rf
touch
    -t 0712250000 file              # 修改文件时间戳(YYMMDDhhmm)
ls *[0-9]*
    -R                  # 递归显示文件
    -l                  # 详情
    -S                  # 按大小排列
    -r                  # reverse
    -h                  # 自动大小单位
    -F                  # 加后缀标识类型
    -Z                  # 显示文selinux状态
tree
mkdir
rmdir
cd
    ~
    -
cp
    -r                  # 递归
    -p                  # 带权限复制
    -d                  # 保留链接
    -a                  # -dpr
mv
find .
    maxdepth 1
    -name &quot;*.go&quot;
    -type f
    -atime +100         # 100天未使用过的执行文件
    -mtime -10          # 10天内创建或修改的文件
    -exec chmod +x      # 对找到的文件执行命令
    -xdev               # 忽略块设备
pwd                     # 当前路径
file                    # 探测文件类型
uniq                    # 删除重复列
ln
du -d 1 -h
    -s                  # 只返回汇总情况
    -k                  # 统一单位

chmod ugo+rwx           # u拥有者, g群组, o其他人, +添加, -删除, r读、w写、x执行
    chmod a+rwx         # a指所有人
chattr +i file          # 改变属性
lsattr file
chown -R outrun:outrun .
chgrp -R outrun .
getfacl                 # 查看一个文件的ACL设置
setfacl [-bkndRLP] { -m|-M|-x|-X ... } file ...
    -b                  # 去掉所有acl设置
    -m u:sudo:rwx   filename    # 配置用户权限
    -m g:sudo:r-x  filename     # 配置组的权限
    -x u:user1 filename         # 删除一个ACL设置
    -d -m g:sudo:rwx            # 指定default

cat
tac                     # 倒转行显示
wc                      # 统计行, 单词, 字符
grep
awk
sort
    -r                  # reverse
    -n                  # 显示行号
more
less

iconv
    -l                  # 列出已知的编码
    -f gbk -t utf-8 -c orig.txt -o tgt.txt      # 转码
tar xf
    cfzv x.tar.gz x     # 压缩
    xfzv x.tar.gz       # 解压
    --exclude=/proc
gzip x                  # 压缩
    -d x                # 解压
unzip
unzip-beta              # 解压并转码中文
head -2
tail -2
    -f
paste file1 file2       # 合并两个文件或两栏内容
    -d '+'              # 分隔符
nano
strings                 # 打印可打印字符
getenforce              # 查看selinux状态
sestatus -v             # 查看selinux状态
setenforce 0            # 临时关闭selinux
    1                   # 启用
chcon
    -R                  # 递归
    -t                  # type
    -u                  # user
    -r                  # role
    --reference         # 参照更新
    chcon -R -t mysqld_db_t /data
    chcon -R --reference=/var/lib/mysql /data

mucommander             # 跨平台文件管理软件
</code></pre>
<h1 id="系统">
  系统
  <a class="anchor" href="#%e7%b3%bb%e7%bb%9f">#</a>
</h1>
<pre><code>man
    -f                  # 简要介绍
    -k                  # 通配搜索
w                       # 在线用户名, 终端号, 登录时间, 空闲时间, 终端连接所有进程时间, 当前进程时间, 当前命令
uptime                  # 当前时间, 运行时间, 用户数, 系统负载
tload                   # 系统负载图(用字符画)
id outrun               # 用户信息
su
sudo
clear
whatis                  # man -f
apropos                 # man -k
uname -a                # 查看版本
hostname
id                      # 用户信息, 所在组

passwd                  # 修改密码
useradd outrun          # 创建用户
    -g outrun           # 指定组
    -r                  # 是系统用户
    -d /home/outrun     # 指定登录目录
    -u 544              # 指定id
userdel -r user1        # 完全删除用户
groups user1            # 查看组
groupadd ftp            # 创建组
usermod                 # 修改用户状态
    -a -G root outrun   # 加入组
    -l newuser user1    # 改名
    -L user1            # 锁定
    -U user1            # 解锁
    -d /home/ftp ftp    # 改登录目录
        -u 123 outrun       # 修改id

poweroff                # 立即关机
shutdown -h now
    -h                  # 关机
    -r                  # 重启
pm-suspend              # 挂起电脑
halt
bash
    -c                  # 执行命令字符串
</code></pre>
<h1 id="查看">
  查看
  <a class="anchor" href="#%e6%9f%a5%e7%9c%8b">#</a>
</h1>
<pre><code>env                     # 查看所有环境变量
echo
watch -n 1 -d netstat  -ant         # 监视
date +%Y/%m/%d/%H:%M
rig                     # 随机产品人名地名
forturn                 # 随机名言
toilet                  # 彩虹字
cowsay
figlet                  # 大写字
cmatrix                 # 终端黑客帝国
sl                      # 火车
cal 9 1752              # 打印日历
jq . a.json             # 验证json格式
</code></pre>
<h1 id="控制">
  控制
  <a class="anchor" href="#%e6%8e%a7%e5%88%b6">#</a>
</h1>
<pre><code>script/scriptreply      # 终端录制
    script -t 2&gt;timing.log -a output.log
    scriptreply timing.log output.log
source
bc
maxima                  # 符号计算
pv -qL 10               # 文件缓慢显示
aview                   # 图片文件化
shred                   # 文件粉碎
factor                  # 分解质因数
screenfetch
expect                  # 为运行的脚本预填表单
    o-&gt; 结束
    #!/usr/bin/expect

    spawn ssh outrun@192.168.1.103
    expect &quot;*password&quot;
    send &quot;asdf\n&quot;
    expect eof

    o-&gt; 交互
    #!/usr/bin/expect -f
    spawn sudo /usr/local/mysql/bin/mysqld_safe --user=mysql
    expect &quot;*password:*&quot;
    send -- &quot;asdf&quot;
    send -- &quot;\n&quot;

    interact            # interact留下交互, exit退出

    o-&gt; 后台执行        # 不要expect eof
    if [fork]!=0 exit
    disconnect
</code></pre>
<h1 id="日志">
  日志
  <a class="anchor" href="#%e6%97%a5%e5%bf%97">#</a>
</h1>
<pre><code>dmesg                   # 启动日志
rsyslog                 # 日志管理, syslog的实现, 在systemd中被systemd-journal取代
mcelog                  # machine check exception log
journalctl              # 日志查看
        -xe
</code></pre>
<h1 id="设备">
  设备
  <a class="anchor" href="#%e8%ae%be%e5%a4%87">#</a>
</h1>
<pre><code>top
    top -d 1 -p pid [,pid ...]
htop
    按键
        h               # 帮助
vmstat                  # 获得有关进程、swap、内存、cpu等系统信息
dstat                   # 定时收集系统信息
sar                     # 全面的系统活动情况
ulimit -s unlimited     # 限制shell启动资源, 不限制堆栈大小
    -a 显示各种限制
    -u 10000 最大用户数
    -n 102400 文件句柄数
    -d unlimited 数据段长度
    -m unlimited 内存大小
    -t unlimited cpu时间
    -v unlimited 虚拟内存
setup

slabtop                 # 内核片缓存信息
mpstat                  # cpu统计信息
lxtask                  # 监控内存

xgamma -gamma .75       # 调整屏幕色值

amixer set Master 100%  # 调节音量
alsamixer               # 调节声音
alsactl                 # 设置alsamixer
    sudo alsactl store                      # 保存
    sudo alsactl restore                    # 加载
powertop                # intel电源管理


lspci
lsusb
</code></pre>
<h2 id="硬盘">
  硬盘
  <a class="anchor" href="#%e7%a1%ac%e7%9b%98">#</a>
</h2>
<pre><code>fdisk -l
cfdisk
sfdisk
parted
mkfs
mkswap

testdisk /dev/sdb1
e2fsck -a /dev/sdb1         # 修复ext2
ntfsfix -d -b /dev/sdb1     # 修复ntfs坏扇区和脏标记
fsck /dev/sda1              # 检查并修复

udisks --detach 设备编号     # 移除磁盘

mount  /dev/sdb1 /mnt
    -o acl                  # 打开acl功能
    -o loop x.iso           # 挂载文件
    -o iocharset=utf8       # 指定编码
    -t vfat                 # 指定类型
umount
    -n                      # 执行umount却不写入
    -l                      # lazy
    -f                      # force

df -h                       # 已挂载分区列表
    -T                      # 查看分区类型
blktrace                    # 磁盘访问情况
lsblk                       # 查看挂载的分区
lvs
    LVM逻辑卷的创建流程如下：
        将一个磁盘或分区格式化为物理卷：pvcreate /dev/sdb1
        将物理卷添加到一个卷组中：vgcreate linuxcast-vg /dev/sdb1 /dev/sdb2
        基于卷组创建一个逻辑卷mylv：lvcreate -L 10G -n mylv  linuxcast-vg
        格式化逻辑卷：mkfs.ext4 /dev/linuxcast-vg/mylv
        挂载使用：mount /dev/linuxcast-vg/mylv  /mnt
    逻辑卷查看命令：
    pvdisplay
    pvs
    vgdisplay
    vgs
    lvdisplay
    lvs
    删除一个逻辑卷：
    lvremove /dev/linuxcast-vg/mylv
    删除一个卷组：
    vgremove linuxcast-vg
    删除一个物理卷：
    pvremove /dev/sda1
</code></pre>
<h2 id="进程">
  进程
  <a class="anchor" href="#%e8%bf%9b%e7%a8%8b">#</a>
</h2>
<pre><code>pidstat                 # 进程使用资源的情况
ps
    aux                 # 用在unix style中, BSD格式显示
    ef                  # 用在system v style中, 标准格式显示
pstree                  # 进程关系
pmap pid                # 进程

kill 1024
    -9
        # 3 QUIT 退出(同ctrl + \)
        # 1 HUP 终端断线
        # 2 INT 中断(同ctrl + c)
        # 9 KILL 强制终止
        # 15 TERM 终止
        # 18 CONT 继续(与STOP相反, 同fg/bg)
        # 19 STOP 暂停(同ctrl + z)
    -l                  # 列出所有信号名称和编号

pkill Xorg              # kill 所有包含
killall Xorg            # kill 所有包含
xkill                   # 运行后 在xwindow点击kill窗口
</code></pre>
<h2 id="网络">
  网络
  <a class="anchor" href="#%e7%bd%91%e7%bb%9c">#</a>
</h2>
<pre><code>iftop                   # 流量监控
ntop                    # 流量监控, web界面
    # localhost:3000
    -W 3001
ab                      # 压测
    ab -c 10 -n 100 https://www.baidu.com/
        # 10并发100次, url结尾要有/
mtr                     # myTrace, 合并ping与traceroute，默认发送ICMP包, 做持续探测, 避免节点波动的影响
                        # Loss%丢包率, Snt每秒包数, Last最近一次延迟, Avg平均值, Best最小值, Worst最大值, StDev标准差
    -u                  # 使用udp包
    --no-dns            # 不对ip做域名反解析
    -4                  # 只用ipv4
    -6                  # 只用ipv6

    结果
        1,2,3,4 本地网络
        5,6 运营商骨干网络
        7,8,9,10 目标服务器本地网络
            8 链路负载均衡
traceroute              # 做一次探测, 默认UDP包, 发包TTL值逐渐增大
    -I                  # 使用ICMP包
ufw                     # ubuntu, 简化防火墙
iptables [-t 表] -命令 匹配 操作
    参数
        -t                  # 要操作的匹配表
        命令
            -P                  # 策略, INPUT等
            -A                  # append, 添加
            -I 1                # 在第2条前添加
            -D 1                # delete, 删除
            -R 1                # 替换

            -L                  # list 显示
            -n                  # 端口以数字显示
            -v                  # verbose, 显示更多信息
            -F                  # flush
            -X                  # 清除自定chain
            -Z                  # 清除统计数
        规则
            -p                  # 协议
            -i                  # 指定网卡流入
            -o                  # 指定网卡流出
            -s                  # 来源ip, !表示排除
            -d                  # 目标ip
            --sport             # 源端口
            --dport             # 目标端口
            -m                  # 使用模块, 会根据-p选择模块
        动作
            -j                  # 跳转
                ACCEPT
    四表(table)
        raw             # 跟踪
        mangle          # 标记
        nat             # 修改ip、port
        filter          # 过滤, 默认
    五链(chain)
        PREROUTING
        FORWORD         # INPUT前转发到POSTROUTING
        INPUT
        OUTPUT
        POSTROUTING 
    策略(policy)
        ACCEPT          # 通过
        REJECT          # 拒绝，返回数据
            返回数据包
                ICMP port-unreachable
                ICMP echo-reply
                tcp-reset
            iptables -A  INPUT -p TCP --dport 22 -j REJECT --reject-with ICMP echo-reply
        DROP            # 丢弃
        REDIRECT        # 导向端口(PNAT)
            iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT--to-ports 8081
        MASQUERADE      # 改写来源ip为本机ip, 可指定目标端口范围
            iptables -t nat -A POSTROUTING -p TCP -j MASQUERADE --to-ports 21000-31000
        LOG             # 日志, 记在/var/log
            iptables -A INPUT -p tcp -j LOG --log-prefix &quot;input packet&quot;
        ULOG
        SNAT            # 改写源地址, 只适用POSTROUTING
            iptables -t nat -A POSTROUTING -p tcp-o eth0 -j SNAT --to-source 192.168.10.15-192.168.10.160:2100-3200
        DNAT            # 改写目标地址, 只适用POSTROUTING
            iptables -t nat -A PREROUTING -p tcp -d 15.45.23.67 --dport 80 -j DNAT --to-destination 192.168.10.1-192.168.10.10:80-100
        TOS
        MIRROR          # 对调源ip与目标ip后返回
        QUEUE           # 封包入队列待处理，实现功能如：计算联机费用
        RETURN          # 退出当前规则链, 返回主规则链
        TTL
        MARK            # 对包做标记数字
            iptables -t mangle -A PREROUTING -p tcp --dport 22 -j MARK --set-mark 22
    规则(rule)          # 自定义的条件
    配置文件
        /etc/sysconfig/iptables
        /usr/libexec/iptables/iptables.init
            save
        rules.v4        # 自定义配置
            *filter
            :INPUT ACCEPT [186:19951]
            :FORWARD ACCEPT [0:0]
            :OUTPUT ACCEPT [71:11164]
            -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
            -A INPUT -p tcp -m tcp --dport 23 -j ACCEPT
            -A INPUT -p tcp -m tcp --dport 24 -j ACCEPT
            COMMIT
    命令
        systemctl enable iptables.service
        service iptables save
        service iptables restart
        iptables-restore &lt; rules.v4
            # 导入配置
    案例
        关iptables
            service iptables stop
            chkconfig iptables off
        查看
            iptables -L -n -v --line-numbers
        查nat表
            iptables -t nat -L
        flush, 生效
            iptables -F
        service命令
            service iptables save
            service iptables stop
            service iptables start
            service iptables restart
        开机启动
            /etc/network/if-pre-up.d/iptables
                iptables-restore &lt; rules.v4

        插入规则
            iptables -I INPUT 2 -s 202.54.1.2 -j DROP
        删除规则
            iptables -D INPUT 4
        开放所有input/output
            iptables -P INPUT ACCEPT
            iptables -P OUTPUT ACCEPT
        开放input/output tcp 22
            iptables -A INPUT -p tcp --dport 22 -j ACCEPT
            iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT
        vpn转发
            iptables -t nat -A POSTROUTING -s 192.168.252.0/24 -j SNAT --to-source 10.171.83.146
        屏蔽私有地址
            iptables -A INPUT -i eth1 -s 192.168.0.0/24 -j DROP
            iptables -A INPUT -i eth1 -s 10.0.0.0/8 -j DROP
        屏蔽ip
            iptables -A INPUT -s 1.2.3.4 -j DROP
            iptables -A INPUT -s 192.168.0.0/24 -j DROP
            iptables -A OUTPUT -d 192.168.1.0/24 -j DROP
            iptables -A OUTPUT -o eth1 -d 192.168.1.0/24 -j DROP
        屏蔽端口
            iptables -A INPUT -p tcp -s 1.2.3.4 --dport 80 -j DROP
            iptables -A INPUT -i eth1 -p tcp -s 192.168.1.0/24 --dport 80 -j DROP
        记录并屏蔽
            iptables -A INPUT -i eth1 -s 10.0.0.0/8 -j LOG --log-prefix &quot;IP_SPOOF A: &quot;
            iptables -A INPUT -i eth1 -s 10.0.0.0/8 -j DROP
        mac屏蔽
            iptables -A INPUT -m mac --mac-source 00:0F:EA:91:04:08 -j DROP
            # *only accept traffic for TCP port # 8080 from mac 00:0F:EA:91:04:07 * ##
            iptables -A INPUT -p tcp --destination-port 22 -m mac --mac-source 00:0F:EA:91:04:07 -j ACCEPT
        屏蔽icmp
            iptables -A INPUT -p icmp --icmp-type echo-request -j DROP
            iptables -A INPUT -i eth1 -p icmp --icmp-type echo-request -j DROP
        开启范围端口
            iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 7000:7010 -j ACCEPT
        开启范围ip
            iptables -A INPUT -p tcp --destination-port 80 -m iprange --src-range 192.168.1.100-192.168.1.200 -j ACCEPT
        nat
            iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth0 -j SNAT --to 123.4.5.100
                # 改写来自192.168.1.0/24的包, 源ip为123.4.5.100
            iptables -t nat -A PREROUTING -s 192.168.1.0/24 -i eth1 -j DNAT --to 123.4.5.100
                # 改写来自192.168.1.0/24的包, 目标ip为123.4.5.100
            iptables -t nat -A POSTROUTING -s 172.27.0.0/16 -d 10.0.0.1 -p tcp --dport 80 -j SNAT --to-source MASQUERADE
                # 改写来自172.27.0.0/16去向10.0.0.1:80的tcp包, 源ip为本机ip
            iptables -t nat -A PREROUTING -d 192.168.1.1 -p tcp --dport 80 -j DNAT --to-destination 10.0.0.1
                # 改写去向192.168.1.1:80的tcp包, 目标ip为10.0.0.1

firewall
    systemctl start firewalld

    o-&gt; ftp
    firewall-cmd --zone=public --add-port=20/tcp --permanent
    firewall-cmd --zone=public --add-port=21/tcp --permanent
    firewall-cmd --permanent --add-port=1000-2000/tcp
    firewall-cmd --complete-reload

    o-&gt; 8080
    firewall-cmd --query-port=8080/tcp
        --add-port=8080/tcp --permanent --zone=public
        --reload
        --get_active-zones
        --list-all
        --set-default-zone=public
    o-&gt;
    firewall-cmd --permanent --remove-port=8080/tcp
wget
    -i filelist.txt         # 下载一个文件中的所有url
    -x  # 强制创建目录
    -P  # 目录prefix
    -r  # 递归下载
    -l  # 最大递归深度, inf或0代表无限制
    -k  # 修改链接，指向本地文件
    -p  # 下载所有用于显示页面的资源, 如图片
    -L  # 只跟踪relative链接
    -N  # 只获取比本地新的文件
    -np # 不追踪父目录
    -m  # 缩写-N -r -l inf --no-remove-listing
    --no-remove-listing         # 不删除listing文件

ping
telnet
nslookup                    # 查域名ip
nmblookup -A ip             # 查ip域名
nmcli                       # 设置网络连接
    sudo nmcli c mod 'Wired connection 1' ipv4.never-default false
        # 解决manual ip不能设置路由的问题
ifconfig
    打开, 关闭网卡
        ifconfig eth0 up
        ifconfig eth0 down
    临时修改ip
        ifconfig eth0 192.168.0.1 netmask 255.255.255.0 up
            # up表示立即激活
    临时mac
        ifconfig enp0s20u6u3 hw ether 00:50:56:c0:00:02
    虚拟网卡
        ifconfig wlp7s0:1 ip netmask
            # 共用一个ip
netctl                  # 配置网卡服务
route                   # 查看路由表
    -n                  # 不解析域名
arp -n                  # 显示局域网 ip mac表
    -s ip mac           # 设置ip mac表
tcpdump
    介绍
        抓包
    使用
        tcpdump -n -i eth0 host 192.168.31.147 and 114.114.114.114
            # 本机192.168.31.147与远程主机114.114.114.114的数据
        tcpdump -n -i eth0 dst 192.168.31.147
            #  进入本机192.168.31.147的数据
            # tcpdump -n -i eth0 dst 192.168.31.147 or 192.168.31.157 and tcp
            ## 进入两个本机的tcp包
            # and port !22
            ## 端口
        tcpdump -n -i eth0 src 192.168.31.147
            # 本机出去的包
curl
    curl -v             # 详细头信息
    curl -H &quot;Cookie: foo=bar; baz=val&quot;          # 发送cookie
    curl -X post -k http://localhost:9090/a -H &quot;Content-Type: text/plain&quot; -d '{&quot;name&quot;: &quot;a&quot;}'
        # post请求
    curl -O http://104.223.142.166/isu80        # 抓文件
nc                      # netcat, 功能全面
    -U a.sock           # 指定socket
    -v                  # 显示详情
    -z                  # 只测试连通
    -u                  # 使用udp

    o-&gt; 测试udp端口
    nc -vzu 127.0.0.1 1194
dig                     # 域名解析
nmap
    -sP ip/24           # 查看网内所有ip
    -p1-65535           # 扫描所有端口
ip                      # 网卡与ip信息

iotop                   # 实时监视io
iostat                  # 负载情况
lsof -i:8080            # 列出当前系统打开的文件，必须root运行才准确
    -i                  # 端口
    -P                  # 显示端口号而非名称
    -n                  # 显示ip而非域名
    -i -n -P            # 查看进程句柄数
nicstat                 # 网络流量统计
netstat
    -a                  # 显示所有
    -n                  # 显示数字，而不是别名
    -t                  # 仅显示tcp
    -u                  # 仅显示udp
    -p                  # 显示建立链接的程序名
    -l                  # 仅列出listen的服务
    -o                  # 显示timer, 如keepalive
    -antpu          # 端口
ss                      # 端口，性能高
    -l                  # listening
iwlist                  # 列出无线网
iwconfig                # 无线网卡设置
pppoe                   # 宽带
w3m                     # 命令行浏览器

ssh
    ssh 10.1.10.2 -L 9901:localhost:5901
        # 用ssh建tunnel访问内部端口
    ssh -t -L 5900:localhost:5900 remote_host 'x11vnc -localhost -display :0'
        # 本机执行命令并端口映射
sshpass
    sshpass -p asdf ssh root@47.74.230.238
sshfs -o allow_other root@ip:~ /mnt                 # 挂载远程目录
scp a.txt root@ip:~
vnc                     # 远程桌面
    Virtual Network Computing
    相关文章
        linux 自带远程桌面--VNC服务配置说明
    安装
        yum install vnc*

        yum install *vnc-server*
    启动
        vncserver :1
    登录
        vncviewer        # fedora 下gnome自带的vncviewer名为:Remote Desktop Viewer
            输入192.168.0.62:1                      # 实际端口号为5901, 如果服务号为2则为5902
        或者浏览器java-plugin
            localhost:5801                          # 需要安装java
wifi-menu
hostapd                 # 无线热点
    yum install hostapd
    vi /etc/hostapd/hostapd.conf
        wpa_passphrase=asdfasdf
        ssid=myflowers
        interface=p3p1

    yum install dhcp
    vi /etc/dhcp/dhcpd.conf
        option domain-name-servers 192.168.0.1,8.8.8.8;         # 自己的dns提供商
        option routers 192.168.0.42;    # 本机ip
        option domain-name &quot;mydhcp&quot;;
        option domain-name-servers 192.168.0.1;
        log-facility local7;
        subnet 192.168.0.0 netmask 255.255.255.0 {
            range  192.168.0.160 192.168.0.170;
            option broadcast-address 192.168.0.255;
        }
</code></pre>
<h1 id="调度">
  调度
  <a class="anchor" href="#%e8%b0%83%e5%ba%a6">#</a>
</h1>
<pre><code>at                      # 某时间运行一次

jobs                    # 后台作业
fg                      # 后台作业调度到前台
bg                      # 继续执行后台作业
osmo                    # 计划任务软件
reap                    # 用于定时删除目录中文件，并打印日志
    -h                  # 打印帮助信息
    -t                  # 后台运行, 并设置时间间隔
    -s                  # single 单次运行
cron
    介绍
        crond服务在systemd中被timer取代

    使用
        $ service crond start
        $ service crond stop
        $ service crond restart
        $ service crond reload                      # 重载配置
        $ crontab crontest.cron                     # 添加定时任务。打印的文件在用户根目录下
        $ crontab -l                                # 列出用户目前的crontab
        $ crontab -u                                # 设定某个用户的cron服务
        $ crontab -r                                # 删除某个用户的cron服务
        $ crontab -e                                # 编辑某个用户的cron服务
            # crontab -u root -l   查看root的设置

        /etc/crontab                                # 系统配置文件
        /etc/cron.hourly
        /etc/cron.daily
        /etc/cron.weekly
        /etc/cron.monthly                           # 每小时、天、周、月执行的脚本

        定时格式
            M H D m d cmd
                M: 分钟（0-59）每分钟用*或者 */1表示
                H: 小时（0-23）
                D: 天（1-31）
                m: 月（1-12）
                d: 一星期内的天（0~6，0为星期天）
                cmd: 如 ~/a.sh
    例子
        crontest.cron文件中
            15,30,45,59 * * * * echo &quot;aa..........&quot; &gt;&gt; aa.txt
                # 每15分钟执行一次打印
        0 */2 * * * date                            # 每两个小时
</code></pre>
<h1 id="包管理">
  包管理
  <a class="anchor" href="#%e5%8c%85%e7%ae%a1%e7%90%86">#</a>
</h1>
<pre><code>snap
    list                    # 列已安装
    info                    # 查看仓库所有版本
    find                    # 搜索
    install
    remove
    refresh                 # 更新
        refresh all
    revert                  # 还原到上个版本
        --revision          # 指定版本
    run                     # 运行命令
    start                   # 运行service
        --enable            # 开机启动
    stop                    # 停止service
    save                    # 存配置快照
    saved                   # 列出所有快照
rpm                         # 源 rpm fusion
    -i 安装
    -e 卸载
    -qa 查看安装的包名
    -ql 包名, 查看安装的文件
    -qc 包名, 查看软件的配置文件
pacman
    命令 pacman&lt;操作&gt; [选项] [目标]
        操作
            -Q                      # 查询
            -S                      # 安装
            -R                      # 删除
            -D                      # 数据库
            -F                      # 文件
        选项
        选项-S, -R, -U
            -s
        选项-S, -U
        选项-Q
            -s                      # 搜索
            -e                      # 明确指定的
            -n                      # 本地的
            -q                      # 静默
            -i                      # 详情, 两个i显示备份文件和修改状态, 显示依赖
            -l                      # 列出文件
            -o                      # 显示拥有此文件的包名
        选项-R
            -s                      # 递归
            -c                      # 级联依赖此包的包
            -n                      # 不记录备份信息
        选项-S
            -s                      # 搜索
            -y                      # 刷新, 两个y强制升级所有包数据库
            -q                      # 静默
            -u                      # 系统升级
            -c                      # 清理, 一个c清理未安装包, 两个c清理所有cache
        选项-D
        选项-F
        目标

    常用
        -Qeq | pacman -S -                  # 重新安装所有包
        -S $(pacman -Qnq)                   # 重新安装所有包
        -Ss ^ibus-*                         # 通配search
        -S $(pacman -Ssq fcitx*)            # 通配安装
        -R $(pacman -Qsq fcitx)             # 通配删除
        -Rcns plasma                        # 删除plasma
        -Rns                                # 删依赖并删配置
        -Scc                                # 清除缓存
        -Qii zsh                            # 包信息
        -Ql zsh                             # 查看安装的文件
        -Qo /bin/zsh                        # 查看文件属于的包
        -Qdt                                # 查孤儿包 

    源
        mirrors.163.com
downgrade                               # 用于给pacman安装过后软件降级
yum
    list                                # 列出所有包
        updates                         # 列可更新的包
        installed                       # 列已安装
        extras                          # 已安装但不在yum repository的包
    search
    install
    remove
    info                                # 包详情
        updates
        installed
        extras
    provides                            # 包文件
    whatprovides 'bin/isstat'           # 查看命令属性哪个包
    history
        list
        redo 序号                        # 重新做序号
        undo 序号                        # 恢复历史中执行的动作
    groups list                         # 查看安装的组


    设置代理
        /etc/yum.conf
        proxy=http://XXX.XXX.XXX.XXX：XXXX
        或
        proxy=FTP://XXX.XXX.XXX.XXX:XXXX
        proxy_username=你的用户名
        proxy_password=你的用户名的密码
    编译用包
        build-essential                     # yum中基本编译依赖包
        yum install make cmake apr* autoconf automake curl-devel gcc gcc-c++ zlib-devel openssl openssl-devel pcre-devel gd  kernel keyutils  patch  perl kernel-headers compat* mpfr cpp glibc libgomp libstdc++-devel ppl cloog-ppl keyutils-libs-devel libcom_err-devel libsepol-devel libselinux-devel krb5-devel zlib-devel libXpm* freetype libjpeg* libpng* php-common php-gd ncurses* libtool* libxml2 libxml2-devel patch freetype-devel ncurses-devel libmcrypt libtool flex pkgconfig libevent glib libgnomeui-devel
dpkg                        # 管理deb包程序
    -i                      # 安装
    -r                      # 删除
pkgfile                     # 查看命令所需的包
</code></pre>
<h1 id="init">
  init
  <a class="anchor" href="#init">#</a>
</h1>
<pre><code>grub
    /etc/default/grub       # 设置文件
    grub2-mkconfig -o /boot/grub2/grub.cfg      # 使设置生效，update-grub 是debian下做的包装
upstart                     # 状态 waiting, starting, pre-start, spawned, post-start,running,pre-stop, stopping, killed, post-stop
systemv
systemd
systemctl
    status
    daemon-reload           # 修改service文件后重载
    systemctl list-units                        # list known units
    systemctl list-unit-files                   # 已知的services
    systemctl list-sockets                      # list socket units ordered by the listening address
    systemctl enable NAME                       # 设置开机启动, 生成service脚本命令
    systemctl disable NAME
    systemctl start NAME
    systemctl stop NAME
    systemctl restart NAME
    systemctl reload NAME
service
    service start
    service restart
    service stop
    service status
    service --status-all
chkconfig iptables on/off   # 设置服务启动
    --level 2345 iptables off                   # 查看各level服务状态
    --list iptables
</code></pre>
<h1 id="编程">
  编程
  <a class="anchor" href="#%e7%bc%96%e7%a8%8b">#</a>
</h1>
<pre><code>:() { :|:&amp; };:              # fork bombmake
make
    注意
        缩进只能用tab
    命令
        make
        make install
        make glide
    条目里执行shell
        @echo $(shell $(SHELL_PATH))

    o-&gt;
    TESTS = test/*.js
    REPORTER = spec
    TIMEOUT = 10000
    MOCHA_OPTS =

    test:
        @NODE_ENV=test ./node_modules/mocha/bin/mocha \
            --reporter $(REPORTER) \
            --timeout $(TIMEOUT) \
            $(MOCHA_OPTS)
            $(TESTS)

    test-cov
        @$(MAKE) test MOCHA_OPTS='--require blanket' REPORTER=html-cov &gt; coverage.html

    test-all: test test-cov

    .PHONY: test

    o-&gt;
    TESTS = $(shell ls -S `find test -type f -name &quot;*.js&quot; -print`)
    TESTTIMEOUT = 5000
    MOCHA_OPTS =
    REPORTER = spec

    install:
        @$PYTHON=`which python2.6` NODE_ENV=test npm install

    test:
        @NODE_ENV=test ./node_modules/mocha/bin/mocha \
            --reporter $(REPORTER) \
            --timeout $(TIMEOUT) \
            $(MOCHA_OPTS) \
            $(TESTS)

    test-cov:
        @$(MAKE) test REPORTER=dot
        @$(MAKE) test MOCHA_OPTS='--require blanket' REPORTER=html-cov &gt; coverage.html
        @$(MAKE) test MOCHA_OPTS='--require blanket' REPORTER=travis-cov

    reinstall: clean
        @$(MAKE) install

    clean:
        @rm -rf ./node_modules

    build:
        @./bin/combo views .

    .PHONY: test test-cov clean install reinstall
cmake

bash
    set -o              # 设置快捷键模式，默认emacs
    快捷键
        &lt;C-c&gt; 中断
        &lt;C-d&gt; eof
        &lt;C-tab&gt; ls
        &lt;C-l&gt; clean
        &lt;C-a&gt; 移到行首
        &lt;C-e&gt; 移到行尾
        &lt;C-u&gt; 删除到行首
        &lt;C-k&gt; 删除到行尾
        &lt;C-p&gt; 上一个命令
        &lt;C-n&gt; 下一个命令
        &lt;C-r&gt; 查看历史
        &lt;C-s&gt; 冻结
        &lt;C-q&gt; 解冻
        &lt;C-t&gt; 交换字符
        &lt;C-w&gt; 删word
        &lt;C-z&gt; 暂停到后台
        &lt;C-\&gt; 中断
        &lt;C-/&gt; 撤消
        &lt;C-_&gt; 删除一行
        &lt;M-r&gt; 取消历史变更
zsh
fish
tmux
    session
    window
    pane
    ~/.tmux.conf

    快捷键prefix &lt;C-b&gt;

    系统
        prefix
            ?        # 帮助
            :        # 命令模式
            [        # 复制模式
        tmux
            kill-server
            source a


    session
        prefix
            d        # 脱离
            D        # 选择脱离
            r        # 重绘
            s        # 选择
            ~        # 信息历史

        tmux
            ls
            attach a
                # 返回session
                -t name
            rename-session a
            switch -t a
    window
        prefix
            c        # 新建
            &amp;        # 关闭
            ,        # 命名
            .        # 编号
            w        # 选择
            [0-9]        # 切换
            n        # 向后切换
            p        # 向前切换
            l        # 置换
            f        # 所有window查找

    pane
        prefix
            &quot;            # 横分
            %            # 竖分
            x            # 关闭
            !            # 移到新window
            方向          # 切换
            o            # 切换到下一个
            &lt;C-o&gt;        # 向下旋转
            &lt;M-o&gt;        # 向上旋转
            {            # 向前置换
            }            # 向后转换
            &lt;C-方向&gt;      # 调整size
            &lt;M-方向&gt;      # 5倍调整size
            空格          # 切换布局
            &lt;M-[0-5]&gt;    # 选择布局
            q            # 显示编号

    内置命令
        source-file a
screen
    -ls                 # 查看所有session
    -r                  # 进入id
makepkg                 # 创建软件包

perf                    # 性能调优
strace                  # 跟踪系统调用
itrace                  # linux系统编程中跟踪进程的库函数调用
    -S ./hello          # 跟踪所有系统调用
dtrace                  # 应用程序动态跟踪
bpftrace                # btrace2.0
gdb
SystemTap               # 内核动态探针
</code></pre>
<h1 id="媒体">
  媒体
  <a class="anchor" href="#%e5%aa%92%e4%bd%93">#</a>
</h1>
<pre><code>import                  # 截图
    import a.png        # 选取区域
    -pause 3 -frame a.png                       # 截窗口, 延迟3秒(为了选定)
display                 # 显示图片
    display *.png       # 幻灯片
    -delay 5            # 5百分之秒切换

    快捷键
        空格            # 下一张
        退格            # 上一张
        h               # 水平翻转
        v               # 垂直翻转
        /               # 顺时针翻转90度
        \               # 逆时针旋转90度
        &gt;               # 放大
        &lt;               # 缩小
        f7              # 模糊
convert                 # 转换图片
    convert a.jpg a.png # 转格式

    -resize 1024x768
        convert -resize a.jpg a1.jpg
    -sample 50%x50%     # 缩略图
    -rotate 270         # 顺时针旋转270度
    -flip               # 左右翻转
    -paint 4            # 旋转角度

    -draw               # 加文字
        convert -fill black -pointsize 60 -font helvetica -draw 'text 10,80 &quot;A&quot; ‘  a.jpg  a1.jpg
            # 用黑色, 60磅, helvetica字体, 在位置10,80 写A
    -raise 5x5          # 右下增加
    +raise 5x5          # 左上增加
    -bordercolor red -border 5x5                # 红色边框
    -mattecolor black -frame 5x5                # 黑色边框

    -noise 3            # 油画
    -monochrome         # 噪声
    -blur 80            # 高斯模糊
    -flop               # 底片
    -negate             # 黑白
    -charcoal 2         # 炭笔
    -spread 30          # 漩涡
    -swirl 67           # 凸起
</code></pre>
<h1 id="网络服务">
  网络服务
  <a class="anchor" href="#%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1">#</a>
</h1>
<pre><code>rclone
    config              # 配置向导
    ls [name]:          # 显示文件
    lsd [name]:         # 显示文件夹
    copy a [name]:a     # 上传
    cleanup             # 只保留最新版本
    sync                # 本地向远程同步
    mount               # 双向一致同步
        fusermount -u /path/to/local/mount
            # umount
rclone-browser          # rclone GUI
</code></pre>
<h1 id="图形程序">
  图形程序
  <a class="anchor" href="#%e5%9b%be%e5%bd%a2%e7%a8%8b%e5%ba%8f">#</a>
</h1>
<h2 id="桌面">
  桌面
  <a class="anchor" href="#%e6%a1%8c%e9%9d%a2">#</a>
</h2>
<pre><code>kde
</code></pre>
<h3 id="gnome">
  gnome
  <a class="anchor" href="#gnome">#</a>
</h3>
<pre><code>启动
    .xinitrc
        exec gnome-session
    startx
gnome3应用程序列表
    /usr/share/applications
取消ctrl+alt+down/up
    gsettings set org.gnome.desktop.wm.keybindings switch-to-workspace-down &quot;['']&quot;
    gsettings set org.gnome.desktop.wm.keybindings switch-to-workspace-up &quot;['']&quot;
gnome-shell
    alt + f2后输入lg
gnome terminate
    ctrl + shift + c/v                  # 复制/粘贴
    ctrl + shift + t/n                  # 打开新标签/新窗口
    ctrl + w 或 alt + backspace          # 删除最后的word
    ctrl + shift + w/q                  # 关闭当前term/所有term
    ctrl + shift + f/g/h                # 搜索/搜索下一个/搜索上一个
    ctrl + pageUp/pageDown              # 切换标签
    ctrl + shift + pageUp/pageDown      # 移动标签
    alt + 1/2/3/..../0                  # 切换到第1/2/3/....../10个标签
系统快捷键
    右键快捷键
        shift + f10
</code></pre>
<h3 id="i3">
  i3
  <a class="anchor" href="#i3">#</a>
</h3>
<pre><code>启动
    .xinitrc
        exec i3
</code></pre>
<h3 id="awesome">
  awesome
  <a class="anchor" href="#awesome">#</a>
</h3>
<pre><code>启动
    .xinitrc
        exec /usr/bin/awesome &gt;&gt; ~/.cache/awesome/stdout 2&gt;&gt; ~/.cache/awesome/stderr
命令
    awesome
    awesome-client
配置
    配置模板
        /etc/xdg/awesome/rc.lua
    .config/awesome/rc.lua
        Variable definitions            # 可定义布局优先级
        Menu                            # 右键菜单
        Wibar                           # 生成screen, 设壁纸
        Mounse bindings                 # 鼠标键绑定函数
        Key bindings                    # 快捷键
        Rules                           # client规则, 如在哪个screen显示
        Signals                         # client启动信号触发动作
        自定义
    API
        文档地址
            https://awesomewm.org/apidoc/
        快捷键简写
            modkey                      # win键
            Mod1                        # alt
        gears                           # 工具组件
        wibox                           # wibar
            widget
            layout
        beautiful                       # theme
            init(gears.filesystem.get_configuration_dir() .. &quot;/themes/default/theme.lua&quot;)
                # 主题
            useless_gap = 5             # 窗口间隔
            theme.lua文件
                theme.wallpaper = &quot;~/.config/awesome/themes/awesome-wallpaper.png&quot;
                    # 背景

        naughty
            notify({ preset = naughty.config.presets.critical, title = &quot;Oops, there were errors during startup!&quot;, text = awesome.startup_errors })
        menubar
            menu_gen
        hotkeys_popup
        awful
            layout
            tag({ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot; }, s, awful.layout.layouts[1])
            key({ modkey }, &quot;F12&quot;, function () awful.spawn{ &quot;xlock&quot; } end)
                # 快捷键
                awful.key({ &quot;Mod1&quot; }, &quot;Escape&quot;, function () awful.menu.menu_keys.down = { &quot;Down&quot;, &quot;Alt_L&quot; } awful.menu.clients({theme = { width = 250 }}, { keygrabber=true, coords={x=525, y=330} }) end),
            widget
            rules
            spawn(&quot;firefox&quot;, { tag = mouse.screen.selected_tag })
            util.spawn_with_shell(&quot;~/.config/awesome/autorun.sh&quot;)
                # 随桌面启动脚本
    autorun.sh
        #!/usr/bin/env bash

        # nothing to use
        function run {
            if ! pgrep $1 ; then
                $@&amp;
            fi
        }

        if randr | grep -q 'eDP1 connected' ; then
            run xrandr --output VIRTUAL1 --off --output eDP1 --mode 1920x1080 --pos 0x720 --rotate normal --output DP1 --off --output DP2-1 --mode 2560x1080 --pos 3360x720 --rotate normal --output DP2-2 --off --output DP2-3 --off --output HDMI2 --off --output HDMI1 --primary --mode 2560x1440 --pos 1920x0 --rotate left --output DP2 --off
        fi

        run ibus-daemon -d -x
        run nm-applet
插件
    revelation          # 全局client
    shifty              # 动态tag
    naughty             # 通知
    vicious             # widgets
    obvious             # widgets
    bashets             # widgets
</code></pre>
<h2 id="显示">
  显示
  <a class="anchor" href="#%e6%98%be%e7%a4%ba">#</a>
</h2>
<pre><code>xrandr
    # 多显示器布局
    -q                         # 列出所有屏幕
    --verbose                   # 列出所有屏幕详情
    --output eDP1               # 指定屏幕
    --off                       # 禁用屏幕
    --primary                   # 指定主显示器
    --mode                      # 分辨率
    --pos                       # 指定屏幕在背景板的位置, 根据各屏幕分辨率、位置算
    --rotate                    # 旋转屏幕
        normal
        left
        right
        inverted
</code></pre>
<h2 id="任务栏">
  任务栏
  <a class="anchor" href="#%e4%bb%bb%e5%8a%a1%e6%a0%8f">#</a>
</h2>
<pre><code>nm-applet
    # 联网
</code></pre>
<h2 id="输入法">
  输入法
  <a class="anchor" href="#%e8%be%93%e5%85%a5%e6%b3%95">#</a>
</h2>
<pre><code>fcitx
ibus
ibus-daemon -d -x -r        # ibus后台运行
</code></pre>
<h2 id="模拟">
  模拟
  <a class="anchor" href="#%e6%a8%a1%e6%8b%9f">#</a>
</h2>
<pre><code>wine
winetricks                  # 安装wine的各种依赖
cabextract                  # microsoft cabinet获取工具</code></pre>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/outrunJ/hugo-blog/commit/4b8167b270d869a4f1818240fa7c9ffb0fba2cc4" title='Last modified by 申文庆 | Feb 4, 2021' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>Feb 4, 2021</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/outrunJ/hugo-blog/tree/master/content/content/docs/ops/tool.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#包">包</a></li>
    <li><a href="#内核">内核</a></li>
    <li><a href="#文件">文件</a></li>
    <li><a href="#系统">系统</a></li>
    <li><a href="#查看">查看</a></li>
    <li><a href="#控制">控制</a></li>
    <li><a href="#日志">日志</a></li>
    <li><a href="#设备">设备</a>
      <ul>
        <li><a href="#硬盘">硬盘</a></li>
        <li><a href="#进程">进程</a></li>
        <li><a href="#网络">网络</a></li>
      </ul>
    </li>
    <li><a href="#调度">调度</a></li>
    <li><a href="#包管理">包管理</a></li>
    <li><a href="#init">init</a></li>
    <li><a href="#编程">编程</a></li>
    <li><a href="#媒体">媒体</a></li>
    <li><a href="#网络服务">网络服务</a></li>
    <li><a href="#图形程序">图形程序</a>
      <ul>
        <li><a href="#桌面">桌面</a>
          <ul>
            <li><a href="#gnome">gnome</a></li>
            <li><a href="#i3">i3</a></li>
            <li><a href="#awesome">awesome</a></li>
          </ul>
        </li>
        <li><a href="#显示">显示</a></li>
        <li><a href="#任务栏">任务栏</a></li>
        <li><a href="#输入法">输入法</a></li>
        <li><a href="#模拟">模拟</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












