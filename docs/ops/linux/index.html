<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Linux
  
 | outrun的笔记</title>



<link rel="stylesheet" href="/book.min.1a0250256273fabf0f848ed9a3c50aae344d758339cad9725e656ac71546e6f5.css">


<link rel="icon" href="/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://example.com/">outrun的笔记</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2fops\2flinux\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/"><strong>介绍</strong></a></li>
<li><a href="/docs/algorithm"><strong>算法</strong></a>

<ul>
<li><a href="/docs/algorithm/math">数学</a></li>
<li><a href="/docs/algorithm/thought">思想</a></li>
<li><a href="/docs/algorithm/data_structure">数据结构</a></li>
</ul></li>
<li><a href="/docs/design"><strong>设计</strong></a>

<ul>
<li><a href="/docs/design/code">代码</a></li>
<li><a href="/docs/design/project">项目</a></li>
</ul></li>
<li><a href="/docs/pl"><strong>程序语言</strong></a>

<ul>
<li><a href="/docs/pl/go">go</a></li>
<li><a href="/docs/pl/js">js</a></li>
<li><a href="/docs/pl/java">java</a></li>
<li><a href="/docs/pl/python">python</a></li>
<li><a href="/docs/pl/haskell">haskell</a></li>
<li><a href="/docs/pl/clojure">clojure</a></li>
<li><a href="/docs/pl/css">css</a></li>
<li><a href="/docs/pl/markup_language"><strong><em>标记语言</em></strong></a>

<ul>
<li><a href="/docs/pl/markup_language/html">html</a></li>
</ul></li>
</ul></li>
<li><a href="/docs/architecture"><strong>架构</strong></a>

<ul>
<li><a href="/docs/architecture/principle">原理</a></li>
<li><a href="/docs/architecture/performance">性能</a></li>
<li><a href="/docs/architecture/solution">方案</a></li>
<li><a href="/docs/architecture/nodejs">nodejs</a></li>
</ul></li>
<li><a href="/docs/backend"><strong>后端</strong></a>

<ul>
<li><a href="/docs/backend/principle">原理</a></li>
<li><a href="/docs/backend/elasticsearch">elasticsearch</a></li>
<li><a href="/docs/backend/javaweb">javaweb</a></li>
<li><a href="/docs/backend/spring">spring</a></li>
<li><a href="/docs/backend/hibernate">hibernate</a></li>
</ul></li>
<li><a href="/docs/db"><strong>数据库</strong></a>

<ul>
<li><a href="/docs/db/mongodb">mongodb</a></li>
<li><a href="/docs/db/mysql">mysql</a></li>
<li><a href="/docs/db/oracle">oracle</a></li>
<li><a href="/docs/db/postgre_sql">pgsql</a></li>
<li><a href="/docs/db/redis">redis</a></li>
</ul></li>
<li><a href="/docs/frontend"><strong>前端</strong></a>

<ul>
<li><a href="/docs/frontend/jquery">jquery</a></li>
<li><a href="/docs/frontend/bootstrap">bootstrap</a></li>
<li><a href="/docs/frontend/angular">angular</a></li>
<li><a href="/docs/frontend/react">react</a></li>
<li><a href="/docs/frontend/threejs">three.js</a></li>
</ul></li>
<li><a href="/docs/ops"><strong>运维</strong></a>

<ul>
<li><a href="/docs/ops/linux">linux</a></li>
<li><a href="/docs/ops/linux_tool">linux工具</a></li>
<li><a href="/docs/ops/docker">docker</a></li>
</ul></li>
<li><a href="/docs/test"><strong>测试</strong></a></li>
<li><a href="/docs/tool"><strong>图形工具</strong></a>

<ul>
<li><a href="/docs/tool/vim">vim</a></li>
<li><a href="/docs/tool/eclipse">eclipse</a></li>
</ul></li>
<li><a href="/docs/management">管理</a></li>
<li><a href="/docs/media">媒体</a></li>
<li><a href="/docs/english">英语</a></li>
<li><a href="/docs/interview">题目</a></li>
<li><a href="/docs/infomation">信息</a></li>
<li><a href="/posts"><strong>博客</strong></a></li>
<li><a href="/about_me">关于我</a></li>
<li><a href="/register">&ldquo;寄存器&rdquo;</a></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Linux
  
</strong>
</header>

      
<article class="markdown">

<h1 id="历史">历史</h1>

<pre><code>40年代：汇编语言
60年代：汇编语言unux
70年代初：c语言、c语言unux、unux开源（美国反垄断法制裁AT&amp;T）
70年代末：AT&amp;T分裂，unix闭源
80年代：minix
90年代：linux  # 80、90年代之间：gun计划
</code></pre>

<h1 id="文件位置">文件位置</h1>

<pre><code>/var
    /log
        /boot.log   # 启动日志
/proc
    /[pid]
        /status # 任务虚拟地址空间的大小 VmSize, 应用程序正在使用的物理内存的大小 VmRSS
/etc
    /sudoers
    /group
    /passwd
    /resolv.conf
        # dns
        nameserver 223.5.5.5
        nameserver 223.6.6.6    # alidns
    /sysconfig
        /network-scripts/ifcfg-eth0
        # 永久修改ip
        DEVICE=eth0 # 设备别名
        BOOTPROTO=static    # 网卡获得ip地址的方式，默认dhcp
        HWADDR=00:00:00:00:00:00    # mac
        IPADDR=192.168.0.100    # ip
        NETMASK=255.255.255.0   # netmask
        ONBOOT=yes  # 系统启动时是否激活此设备
        /network    # 修改网关
        NETWORKING=yes  # 系统是否使用网络
        HOSTNAME=abc    # 设置本机主机名, 要与/etc/hosts中设置的主机名相同
        GATEWAY=192.168.0.1 # 网关ip
    /systemd
        /logind.conf
            # 电源管理配置
            HandleLidSwitch=ignore  # 关闭盖子不执行操
        /system
            # units位置
            /default.target # 启动级别
    /issue
        # 发行版信息
    /hosts
        # 修改localhost
    /ld.so.conf
        # lib设置,加入so文件的配置路径如:/usr/local/lib
        执行/sbin/ldconfig -v 更新
    /profile
        # 用户登录时加载的环境变量
    /inittab
        # 设置启动级别
        id:3:initdefault:
    /selinux/config
        SELINUX=enforcing
            # disabled 为关闭
/usr
    /lib
        /systemd
            /system # units位置
/run
    /systemd
        /system # units位置
/sys
    /class
        /backlight
            /acpi_video0
                /brightness # 修改亮度
</code></pre>

<h2 id="initd">initd</h2>

<pre><code>/etc/rc.d/init.d/rc.local
    chmod +x rc.local
    ln -sf ../init.d/rc.local rc0.d/S999rc.local
    ln -sf ../init.d/rc.local rc1.d/S999rc.local
    ln -sf ../init.d/rc.local rc2.d/S999rc.local
    ln -sf ../init.d/rc.local rc3.d/S999rc.local
    ln -sf ../init.d/rc.local rc4.d/S999rc.local
    ln -sf ../init.d/rc.local rc5.d/S999rc.local
    ln -sf ../init.d/rc.local rc6.d/S999rc.local
        # 文件名中S表示传递start参数(K表示stop), 999为启动级别
</code></pre>

<h2 id="fstab">fstab</h2>

<pre><code>/dev/sda1 /home/outrun/sda1 ntfs-3g defaults 0 0
</code></pre>

<h2 id="日志">日志</h2>

<pre><code>access-log      # http传输
acct和pacct     # 用户命令
aculog          # modem活动
btmp            # 失败记录
lastlog         # 最近成功登录、最后一次不成功登录
syslog          # 系统日志
messages        # syslog
sudolog         # sudo记录
sulog           # su记录
utmp            # 当前登录用户
wtmp            # 用户登录登出记录
xferlog         # ftp会话
</code></pre>

<h1 id="原理">原理</h1>

<h2 id="约定">约定</h2>

<pre><code>权限
    drwxr-xr-x  # d代表目录
    lrwxrwxrwx  # l代表软连接
    drwxrwxrwt  # 末尾的t代表粘滞位(sticky bit)，用户只能删除自己建东西
                ## chmod 1777来设置
扩展名
    .bin
        # 二进制可执行文件，加上执行权限./执行即可                
    .tar.gz                
        # gzip压缩,tar打包的文件
    .tar.tgz        
        ＃ 同gzip
    .tar.bz2
    .tar.xz
</code></pre>

<h2 id="错误处理">错误处理</h2>

<pre><code>curedump机制
命令
    ulimit
目录
    /proc/[pid]/
</code></pre>

<h2 id="内核">内核</h2>

<h3 id="fork">fork</h3>

<pre><code>介绍
    子线程
</code></pre>

<h3 id="epoll">epoll</h3>

<pre><code>介绍
    多路复用io接口，提高大量并发连接中只有少量活跃情况下系统cpu利用率
</code></pre>

<h3 id="signals">signals</h3>

<pre><code>介绍
    unix系统中出错时显示的错误码（通常是拼在最后）
    http://people.cs.pitt.edu/~alanjawi/cs449/code/shell/UnixSignals.htm
SIGHUP  1   Exit    Hangup
SIGINT  2   Exit    Interrupt
SIGQUIT 3   Core    Quit
SIGILL  4   Core    Illegal Instruction
SIGTRAP 5   Core    Trace/Breakpoint Trap
SIGABRT 6   Core    Abort
SIGEMT  7   Core    Emulation Trap
SIGFPE  8   Core    Arithmetic Exception
SIGKILL 9   Exit    Killed
SIGBUS  10  Core    Bus Error
SIGSEGV 11  Core    Segmentation Fault
SIGSYS  12  Core    Bad System Call
SIGPIPE 13  Exit    Broken Pipe
SIGALRM 14  Exit    Alarm Clock
SIGTERM 15  Exit    Terminated
SIGUSR1 16  Exit    User Signal 1
SIGUSR2 17  Exit    User Signal 2
SIGCHLD 18  Ignore  Child Status
SIGPWR  19  Ignore  Power Fail/Restart
SIGWINCH    20  Ignore  Window Size Change
SIGURG  21  Ignore  Urgent Socket Condition
SIGPOLL 22  Ignore  Socket I/O Possible
SIGSTOP 23  Stop    Stopped (signal)
SIGTSTP 24  Stop    Stopped (user)
SIGCONT 25  Ignore  Continued
SIGTTIN 26  Stop    Stopped (tty input)
SIGTTOU 27  Stop    Stopped (tty output)
SIGVTALRM   28  Exit    Virtual Timer Expired
SIGPROF 29  Exit    Profiling Timer Expired
SIGXCPU 30  Core    CPU time limit exceeded
SIGXFSZ 31  Core    File size limit exceeded
SIGWAITING  32  Ignore  All LWPs blocked
SIGLWP  33  Ignore  Virtual Interprocessor Interrupt for Threads Library
SIGAIO  34  Ignore  Asynchronous I/O
</code></pre>

<h3 id="pf-kernel">pf-kernel</h3>

<pre><code>介绍
    是linux kernel 的fork, pf代表post-factum, 是作者的nickname
</code></pre>

<h3 id="libev">libev</h3>

<pre><code>libevent
    介绍
        是linux kernel 的fork, pf代表post-factum, 是作者的nickname
</code></pre>

<h2 id="进程通信">进程通信</h2>

<pre><code>对象
    ipc
种类
    消息队列
    共享内存
    信号量
消息队列
</code></pre>

<h1 id="发行版">发行版</h1>

<pre><code>lfs
centos
coreos
arch
fedora
debian
gentoo
opensuse
mint
</code></pre>

<h2 id="fedora">fedora</h2>

<pre><code>升级
    fedup --network 21
    或
    fedora-upgrade
升级21
    # rpm --import https://fedoraproject.org/static/95A43F54.txt
    # yum update yum
    # yum clean all
    # yum --releasever=21 distro-sync --nogpgcheck
group
    #yum grouplist
    #yum groupinstall &quot;X Window System&quot;
    #yum groupinstall &quot;GNOME Desktop Environment&quot;
    #yum groupinstall &quot;KDE&quot;

gnome的快捷方式存放地址
安装unity  
    cd /etc/yum.repos.d/
    wget http://download.opensuse.org/repositories/GNOME:/Ayatana/Fedora_17/GNOME:Ayatana.repo
    yum install unity
</code></pre>

<h2 id="arch">arch</h2>

<pre><code>设置
    ahci, secure boot, post behavious thorough
源
    vim /etc/pacman.d/mirrorlist
    pacman -Syy
依赖
    base-devel
分区
    # mount -t efivarfs efivarfs /sys/firmware/efi/efivars
            # 判断efi
    cfdisk
    mkfs.vfat -F32 /dev/nvme0n1p1
            # 或直接使用windows的uefi分区
    mkfs.ext4 /dev/nvme0n1p2
    mkswap /dev/nvme0n1p3
    swapon /dev/nvme0n1p3
    mount /dev/nvme0n1p2 /mnt
    mkdir -p /mnt/boot/EFI
    mount /dev/nvme0n1p1 /mnt/boot/EFI
配置
    pacstrap -i /mnt base
    genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab
    arch-chroot /mnt /bin/bash
    pacman -S dialog wpa_supplicant vim 
    vim /etc/locale.gen
    locale-gen
    echo LANG=en_US.UTF-8 &gt; /etc/locale.conf
    ls -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
    hwclock --systohc --utc
    echo outrun &gt; /etc/hostname
grub
    pacman -S dosfstools grub os-prober efibootmgr
            # bios下 grub os-prober 
    grub-install --target=x86_64-efi --efi-directory=/boot/EFI --bootloader-id=grub
    grub-mkconfig -o /boot/grub/grub.cfg
用户
    passwd
    groupadd outrun
    useradd -m -g users -G outrun -s /usr/bin/bash outrun
    passwd outrun
    vim /etc/sudoers
退出
    exit
    umount -R /mnt
    reboot
桌面
    pacman -S xorg-server xorg-apps xorg xorg-xinit
    pacman -S xf86-video-intel mesa xf86-input-synaptics
    pacman -S gnome
    echo exec gnome-session &gt; .xinitrc
    # systemctl enable gdm
    /etc/modprobe.d/blacklist_nouveau.conf中写blacklist nouveau
    /etc/modprobe.d/modprobe.conf中写blacklist nouveau
    pacman -S ttf-dejavu wqy-microhei
network
    pacman -S networkmanager-openvpn
    systemctl enable NetworkManager
yaourt
    vim /etc/pacman.conf
        [archlinuxfr]
            SigLevel = Never
            Server = http://repo.archlinux.fr/$arch
    pacman -Sy base-devel yaourt
字体
    wiki上找font configuration
</code></pre>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="https://github.com/outrunJ/hugo-blog/commit/37e76d5e09e9780b64056ab9c8a3827a2628f8fb" title='Last modified Jul 19, 2019 by shenwenqing' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" alt="Changed" /> Jul 19, 2019
    </a>
  </div>
  
  
  <div>
    <a href="https://github.com/outrunJ/hugo-blog/tree/master/content/docs/ops/linux.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-6 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#历史">历史</a></li>
<li><a href="#文件位置">文件位置</a>
<ul>
<li><a href="#initd">initd</a></li>
<li><a href="#fstab">fstab</a></li>
<li><a href="#日志">日志</a></li>
</ul></li>
<li><a href="#原理">原理</a>
<ul>
<li><a href="#约定">约定</a></li>
<li><a href="#错误处理">错误处理</a></li>
<li><a href="#内核">内核</a>
<ul>
<li><a href="#fork">fork</a></li>
<li><a href="#epoll">epoll</a></li>
<li><a href="#signals">signals</a></li>
<li><a href="#pf-kernel">pf-kernel</a></li>
<li><a href="#libev">libev</a></li>
</ul></li>
<li><a href="#进程通信">进程通信</a></li>
</ul></li>
<li><a href="#发行版">发行版</a>
<ul>
<li><a href="#fedora">fedora</a></li>
<li><a href="#arch">arch</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
