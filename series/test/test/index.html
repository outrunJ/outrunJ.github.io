<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>测试 - outrunJ笔记</title>
  <meta property="og:title" content="测试 - outrunJ笔记" />
  <meta name="twitter:title" content="测试 - outrunJ笔记" />
  <meta name="description" content="分类 功能测试 黑盒 灰盒 白盒 性能测试 压力测试 负载测试 基准测试 # 统计多少时间内执行了多少次某个方法 回归测试 # 改旧代码后，保证旧代码可用 冒烟测试 # 功能验证，不一定是改旧代码  cpu性能测试 graph-frames subsecond offset  接口测试 工具 loadrunner phoenix 介绍 web自动化测试工具 特点 分布式执行 无脚本模式执行 无人值守模式执行 自定模式执行 模块 数据维护模块 部署模式 server-client 仅windows下可用 socket通信 web部署 server与client放到tomcat或webLogic下部署 http通信 web页面控制与监控client端执行 wireshark siege siege -c 200 -r 100 http://www.google.com # 200并发，发送100次请求 tcpcopy # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中 ab 内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到 ab -n1000 -c100 http://www.google.com/a.html # 100并发, 发送1000次请求 locust # 外网性能测试　http_load # 压测 http_load -rate 5 -seconds 10 http://www.">
  <meta property="og:description" content="分类 功能测试 黑盒 灰盒 白盒 性能测试 压力测试 负载测试 基准测试 # 统计多少时间内执行了多少次某个方法 回归测试 # 改旧代码后，保证旧代码可用 冒烟测试 # 功能验证，不一定是改旧代码  cpu性能测试 graph-frames subsecond offset  接口测试 工具 loadrunner phoenix 介绍 web自动化测试工具 特点 分布式执行 无脚本模式执行 无人值守模式执行 自定模式执行 模块 数据维护模块 部署模式 server-client 仅windows下可用 socket通信 web部署 server与client放到tomcat或webLogic下部署 http通信 web页面控制与监控client端执行 wireshark siege siege -c 200 -r 100 http://www.google.com # 200并发，发送100次请求 tcpcopy # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中 ab 内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到 ab -n1000 -c100 http://www.google.com/a.html # 100并发, 发送1000次请求 locust # 外网性能测试　http_load # 压测 http_load -rate 5 -seconds 10 http://www.">
  <meta name="twitter:description" content="分类 功能测试 黑盒 灰盒 白盒 性能测试 压力测试 负载测试 基准测试 # 统计多少时间内执行了多少次某个方法 回归测试 # 改旧代码后，保证旧代码可用 冒烟测试 # 功能验证，不一定是改旧代码  cpu性能测试 graph-frames subsecond offset  接口测试 工具 loadrunner phoenix 介绍 web自动化测试工具 特点 分布式执行 无脚本模式执行 无人值 …">
  <meta name="author" content="outrunJ"/>
  <meta property="og:site_name" content="outrunJ笔记" />
  <meta property="og:url" content="http://shenwenqing.com/series/test/test/" />
  <meta property="og:type" content="article" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.49-DEV" />
  <link rel="stylesheet" href="/css/style.css" media="all" />
  <link rel="stylesheet" href="/css/syntax.css" media="all" />
  <link rel="stylesheet" href="/css/custom.css" media="all" />
  <script src="/js/jquery-3.3.1.min.js"></script>
  <script defer src="/js/fontawesome.js"></script>
</head>

<body>

<header class="site-header">
  <nav class="site-navi">
    <h1 class="site-title"><a href="/">outrunJ笔记</a></h1>
    <ul class="site-navi-items">
      <li class="site-navi-item-categories"><a href="/categories/" title="Categories">Categories</a></li>
      <li class="site-navi-item-tags"><a href="/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="/archives/" title="Archives">Archives</a></li>
      <li class="site-navi-item-about"><a href="/about/" title="About">About</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">

  <div class="main" role="main">
    <article class="article">
      
      
      <h1 class="article-title">测试</h1>
      
      <hr class="article-title-bottom">
      <ul class="article-meta">
        <li class="article-meta-date"><time>October 10, 2018</time></li>
      </ul>
      
<aside class="toc">
  <nav id="TableOfContents">
<ul>
<li><a href="#分类">分类</a></li>
<li><a href="#cpu性能测试">cpu性能测试</a></li>
<li><a href="#接口测试">接口测试</a>
<ul>
<li><a href="#工具">工具</a>
<ul>
<li><a href="#js">js</a></li>
<li><a href="#python">python</a></li>
</ul></li>
</ul></li>
<li><a href="#页面">页面</a>
<ul>
<li><a href="#工具-1">工具</a></li>
</ul></li>
<li><a href="#移动">移动</a>
<ul>
<li><a href="#工具-2">工具</a></li>
</ul></li>
<li><a href="#数据库">数据库</a>
<ul>
<li><a href="#工具-3">工具</a></li>
</ul></li>
<li><a href="#前端框架">前端框架</a></li>
</ul>
</nav>
</aside>
      

<h1 id="分类">分类</h1>

<pre><code>功能测试
        黑盒
        灰盒
        白盒
性能测试
        压力测试
        负载测试
        基准测试
                # 统计多少时间内执行了多少次某个方法
回归测试
        # 改旧代码后，保证旧代码可用
冒烟测试
        # 功能验证，不一定是改旧代码
</code></pre>

<h1 id="cpu性能测试">cpu性能测试</h1>

<pre><code>graph-frames
subsecond offset
</code></pre>

<h1 id="接口测试">接口测试</h1>

<h2 id="工具">工具</h2>

<pre><code>loadrunner
phoenix
    介绍
            web自动化测试工具
    特点
            分布式执行
            无脚本模式执行
            无人值守模式执行
            自定模式执行
    模块
            数据维护模块
    部署模式
            server-client
                    仅windows下可用
                    socket通信
            web部署
                    server与client放到tomcat或webLogic下部署
                    http通信
                    web页面控制与监控client端执行

wireshark
siege
        siege -c 200 -r 100 http://www.google.com
                # 200并发，发送100次请求
tcpcopy
        # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中
ab
        内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到
        ab -n1000 -c100 http://www.google.com/a.html
                # 100并发, 发送1000次请求
locust
        # 外网性能测试　
http_load
        # 压测
        http_load -rate 5 -seconds 10 http://www.baidu.com
                # -p 并发
                # -f 总计访问数
                # -r 每秒访问频率
                # -s 总计访问时间
yslow
        # firefox插件，网页性能测试工具
jmeter
        # apache性能测试
gatling
        # dsl脚本, 生成报表
wrk
        # 压测
        wrk -R5000 -d10s &quot;http://internal-rope-api-1875734411.cn-north-1.elb.amazonaws.com.cn/online_agents/1&quot;
swagger
        # 文档与测试用例
fortio
        # istio压测工具
hey
        # http压测
</code></pre>

<h3 id="js">js</h3>

<pre><code>heapdump
        # 堆内存快照
jslint
supertest
        # 测http接口
sinon.js
        # 非运行测试，延时测试等
vows
        # asynchronous BDD(behaviour drven development) for Node
chai
        # js断言
mock.js
        # 模拟生成接口假数据
benchmark
    介绍
            测试代码执行性能
    使用
            var Benchmark = require('benchmark');
            var suite = new Benchmark.Suite;

            var int1 = function(str){
                    return +str;
            };
            var int2 = function(str){
                    return parseInt(str, 10);
            };
            var int3 = function(str){
                    return Number(str);
            };
            // 开始测试
            var number = '100';
            suite
            .add('+', function(){
                    int1(number);
            });
            .add('parseInt', function(){
                    int2(number);
            });
            .add('Number', function(){
                    int3(number);
            });
            .on('cycle', function(event){        // 每个测试跑完后输出信息
                    console.log(String(event.target));
            })
            .on('complete', function(){
                    console.log('Fastest is' + this.filter('fastest').pluck('name'));
            })
            .run({'async': true});                    // 这里async与时间计算有关，默认为true
travis
    介绍
            项目node版本测试，在基本依赖下跑
    使用
            在travis上授权仓库，每当push代码到github, 会自动跑测试
            配置根目录下的.travis.yml文件来配置测试内容，如
                    language: node_js
                    node_js:
                    -'0.8'
                    -'0.10'
                    -'0.11'
                    script: make test
                    services:
                            mongodb
                            # 一个使用了mongodb的nodejs应用，用0.8、0.10、0.11三个版本来跑，跑测试的命令是make test
            travis测试的项目，可以得到一个图片地址，显示项目当前的测试通过状态，把这个图片添加到项目的README中
jasmine
    介绍
            编写单元测试
    使用
            describe(&quot;A suite&quot;, function(){
                    var foo;
                    beforeEach(function(){
                            foo = 0;
                            foo += 1;
                    });
                    afterEach(function(){
                            foo = 0;
                    });
                    it(&quot;contains spec with an expectation&quot;, function(){
                            expect(true).toBe(true);
                    });
            });
should
    介绍
            兼容性测试
    安装
            npm install should --save-dev
    使用
    var should = require('should');

    user.should.have.property('name', 'jack')
            # should(user).have.property('name','jack');
    user.should.have.property('pets').with.lengthOf(4);
            # 判断数组
    should.not.exist(err);
    should.exist(result);
    result.bar.should.equal(foo);
    (5).should.be.exactly(5).and.be.a.Number();
    user.should.be.an.instanceOf(Object).and.have.property('name', 'jack');
    this.obj.should.have.property('id').which.is.a.Number();
memwatch
    介绍
            监控内存leak, stats,leak在连续5次垃圾回收后内存没释放时触发, stats事件在垃圾回收时触发

    o-&gt; 堆内存比较
    var memwatch = require('memwatch')
    var leakArray = []
    var leak = function () {
            leakArray.push('leak' + Math.random())
    }
    var hd = new memwatch.HeapDiff()
    for (var i = 0; i &lt; 10000; i++) {
            leak()
    }

    var diff = hd.end()
    console.log(JSON.stringify(diff, null, 2))
muk
    var muk = require('muk')
    before(function () {
            muk(fs, 'readFileSync', function (path, encoding) {
                    throw new Error('mock readFileSync error')
            })
            muk(fs, 'readFile', function (path, encoding, callback) {
                    process.nextTick(function () {
                            # 模拟异步
                            callback(new Error('mock readFile error'))
                    })
            })
    })

    after(function () {
            muk.restore()
    })
rewire
    介绍
            测试私有方法

    o-&gt;
    it('limit should return success', function () {
            var lib = rewire('../lib/index.js')
            var litmit = lib.__get__('limit')
            litmit(10).should.be.equal(10)
    })
mocha
    介绍
            单元测试框架
    命令
            mocha
                    # --reporters 查看所有报告样式, 默认dot, 常用spec, json, html-cov
                    # -R &lt;reporter&gt;采用某报告样式
                    # -t &lt;ms&gt;设置超时时间
    使用
            npm install -g mocha
            // package.json
            {
                    &quot;scripts&quot;: {
                            &quot;test&quot;: &quot;mocha test&quot;
                            &quot;blanket&quot;: {
                                    &quot;pattern&quot;: &quot;//^((?!(node_modules|test)).)*$/&quot;,
                                    &quot;data-cover-flags&quot;: {
                                            &quot;debug&quot;: false
                                    }
                            }
                    }
            }
            mocha test

    o-&gt; bdd风格
    describe('Array', function() {
            before(function() {})
                    # 钩子函数还有after, beforeEach, afterEach
            it('should return -1 when not present', function (done) {
                    [1,2,3].indexOf(4).should.equal(-1)
                    this.timeout(500)
                            # 500ms后超时
                    done()
                            # 用done来测试异步
            })
    })

    o-&gt; bdd风格
    suite('Array', function() {
            setup(function () {})
                    # 钩子函数还有teardown
            suite('$indexOf()', function () {
                    test('should return -1 when not present', function() {
                            assert.equal(-1, [1,2,3].indexOf(4))
                    })
            })
    })
istanbul
    介绍
            名字是依斯坦布尔，用来白盒覆盖用例测试
            支持的use cases有unit tests, browser tests, server side code embedding
    使用
            instanbul cover test.js
phantomjs
    介绍
            前端测试工具
            webkit js测试工具，支持多web标准, dom, css, json, canvas和svg
    o-&gt; 使用1
            npm install mocha-phantomjs
            mocha-phantomjs index.html

    o-&gt; 使用2
            phantomjs hello.js

            // hello.js
            console.log('Hello, world');
            phantom.exit();
browserstack
    介绍
            前端测试工具
            内建webdriver的api
    使用
            npm install browserstack-runner --save-dev
            ./node_modules/.bin/browserstack-runner init
            // browserstack.json
                    &quot;test_framework&quot;: &quot;mocha&quot;,
                    &quot;timeout&quot;: 60,
                    &quot;test_path&quot;: &quot;public/index.html&quot;
            https://www.browserstack.com/accounts/automate
                    得到username 和 access key
                    复制到browserstack.json中的username和key
            browserstack-runner
            https://www.browserstack.com/automate 查看结果
karma
    介绍
            是google Testacular的新名字，自动化完成单元测试
    使用
            npm install -g karma
            karma start
            karma init
                    # 初始化karma配置文件
            npm install karma-jasmine
jscover
    介绍
            覆盖率测试
    使用
            npm install jscover -g
            jscover lib lib-cov
                    # 把lib下的源码编译到lib-cov下，新代码在每一行加上了执行次数统计
            index.js中
                    module.exports = process.env.LIB_COV ? require('./lib-cov/index') : require('./lib/index')
            export LIB_COV=1
            mocha -R html-cov &gt; coverage.html
                    # 生成结果
blanket
    介绍
            比jscover更好的测试工具
    使用
            package.json中
                    &quot;scripts&quot;: {
                            &quot;blanket&quot;: {
                                    &quot;pattern&quot;: &quot;eventproxy/lib&quot;
                                            # 要测试的源码目录
                            }
                    }
            mocha --require blanket -R html-cov &gt; coverage.html
</code></pre>

<h3 id="python">python</h3>

<pre><code>nose
        # 注解测试
selenium
        # 自动化测试
</code></pre>

<h1 id="页面">页面</h1>

<h2 id="工具-1">工具</h2>

<pre><code>jsperf
        # js性能分析
jasmine
        # js单元测试
</code></pre>

<h1 id="移动">移动</h1>

<h2 id="工具-2">工具</h2>

<pre><code>robotium
        # android自动化测试
</code></pre>

<h1 id="数据库">数据库</h1>

<h2 id="工具-3">工具</h2>

<pre><code>sysbench 
        # mysql 压测
        --db-driver=mysql --mysql-host=visitor-bench.ctysoosgzk4k.rds.cn-north-1.amazonaws.com.cn --mysql-user=root --mysql-password=12345678 --threads=512 --events=1000000 --time=0 --report-interval=15 ./bench_visit_page_insert.lua run
</code></pre>

<h1 id="前端框架">前端框架</h1>

<pre><code>structure/behavior(数据结构/行为)问题
        # 判断是否有此耦合，用一个测试验证: 是否为应用逻辑编写一个单元测试而不需要dom结构存在
        ## angular中没有这种问题，因为所有定位元素和处理事件的工作都是在angular内部完成的
        ## 在测试时创建dom，就增加了测试的复杂性。而且页面变化时有更多维护要做。访问dom的操作很慢，测试反馈时间长
</code></pre>

    </article>

    
<ul class="article-share">
  <li>
    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </li>
  <li>
    <div class="fb-share-button" data-href="http://shenwenqing.com/series/test/test/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.10";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
  </li>
  <li>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <g:plus action="share"></g:plus>
  </li>
  <li>
    <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="en" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </li>
  <li>
    <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="en"></a>
    <script>!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
  </li>
</ul>


    <ul class="pager article-pager">
      <li class="pager-newer">
          <a href="/series/backend/backend/" data-toggle="tooltip" data-placement="top" title="后端">&lt; Newer</a>
      </li>
      <li class="pager-older">
        <a href="/series/backend/term/" data-toggle="tooltip" data-placement="top" title="编程术语">Older &gt;</a>
      </li>
    </ul>
  </div>


<div class="site-footer">
  <div class="copyright">&copy; Copyright 2017 outrunJ</div>
  <ul class="site-footer-items">
    <li class="site-footer-item-about"><a href="/about/" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>
<script src="/js/script.js"></script>
<script src="/js/custom.js"></script>


</body>
</html>
