<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Series - outrunJ笔记</title>
  <meta property="og:title" content="Series - outrunJ笔记" />
  <meta name="twitter:title" content="Series - outrunJ笔记" />
  <meta name="author" content="outrunJ"/>
  <meta property="og:site_name" content="outrunJ笔记" />
  <meta property="og:url" content="http://shenwenqing.com/series/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.49-DEV" />
  <link href="/series/index.xml" rel="alternate" type="application/rss+xml" title="outrunJ笔记" />
  <link href="/series/index.xml" rel="feed" type="application/rss+xml" title="outrunJ笔记" />
  <link rel="stylesheet" href="/css/style.css" media="all" />
  <link rel="stylesheet" href="/css/syntax.css" media="all" />
  <link rel="stylesheet" href="/css/custom.css" media="all" />
  <script src="/js/jquery-3.3.1.min.js"></script>
  <script defer src="/js/fontawesome.js"></script>
</head>

<body>

<header class="site-header">
  <nav class="site-navi">
    <h1 class="site-title"><a href="/">outrunJ笔记</a></h1>
    <ul class="site-navi-items">
      <li class="site-navi-item-categories"><a href="/categories/" title="Categories">Categories</a></li>
      <li class="site-navi-item-tags"><a href="/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="/archives/" title="Archives">Archives</a></li>
      <li class="site-navi-item-about"><a href="/about/" title="About">About</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">

  <div class="breadcrumb">
    Series
  </div>
  <div class="main" role="main">
    <section class="list section-list">
      <article class="article">
        <a href="/series/db/mycat/" class="article-titles">
          <h2 class="article-title">Mycat</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          目录结构  bin mycat # 服务器启动等 conf wrapper.conf # jvm配置参数(如分配系统资源) server.xml # 服务器参数，用户授权 schema.xml # 逻辑库，表，分片的定义．修改后要重启 log4j.xml # 配置输出到logs/mycat.log的日志 logs mycat.log # 日志（每天一个日志文件）， 可调整输出级别  默认值  默认数据端口: 8066 默认管理端口: 9066  配置 wrapper.conf # jvm配置参数(如分配系统资源) server.xml # 服务器参数，用户授权 schema.xml # 逻辑库，表，分片的定义．修改后要重启 log4j.xml # 配置输出到logs/mycat.log的日志 mysql linux版数据库设置大小写不敏感，否则会发生表找不到的问题 my.cnf [mysqld] lower_case_table_names = 1  例子 server.xml &lt;mycat&gt; &lt;user name=&quot;test&quot;&gt; &lt;property name=&quot;password&quot;&gt;test&lt;/property&gt; &lt;property name=&quot;schemas&quot;&gt;TESTDB&lt;/property&gt; &lt;/user&gt; &lt;/mycat&gt; schema.xml &lt;mycat&gt; &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot;&gt; &lt;table name=&quot;travelrecord&quot; dataNode=&quot;dn1,dn2,dn3&quot; rule=&quot;auto-sharding-long&quot; /&gt; &lt;table name=&quot;employee&quot; primaryKey=&quot;ID&quot; dataNode=&quot;dn1,dn2&quot; rule=&quot;sharding-by-intfile&quot; /&gt; &lt;table name=&quot;company&quot; primaryKey=&quot;ID&quot; type=&quot;global&quot; dataNode=&quot;dn1,dn2,dn3&quot; /&gt; &lt;table name=&quot;goods&quot; primaryKey=&quot;ID&quot; type=&quot;global&quot; dataNode=&quot;dn1,dn2&quot; /&gt; &lt;table name=&quot;hotnews&quot; primaryKey=&quot;ID&quot; dataNode=&quot;dn1,dn2,dn3&quot; rule=&quot;mod-long&quot; /&gt; &lt;table name=&quot;customer&quot; primaryKey=&quot;ID&quot; dataNode=&quot;dn1,dn2&quot; rule=&quot;sharding-by-intfile&quot;&gt; &lt;childTable name=&quot;orders&quot; primaryKey=&quot;ID&quot; joinKey=&quot;customer_id&quot; parentKey=&quot;id&quot;&gt; &lt;childTable name=&quot;order_items&quot; joinKey=&quot;order_id&quot; parentKey=&quot;id&quot; /&gt; &lt;/childTable&gt; &lt;childTable name=&quot;customer_addr&quot; primaryKey=&quot;ID&quot; joinKey=&quot;customer_id&quot; parentKey=&quot;id&quot; /&gt; &lt;/table&gt; &lt;/schema&gt; &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;localhost1&quot; database=&quot;db1&quot; /&gt; &lt;dataNode name=&quot;dn2&quot; dataHost=&quot;localhost1&quot; database=&quot;db2&quot; /&gt; &lt;dataNode name=&quot;dn3&quot; dataHost=&quot;localhost1&quot; database=&quot;db3&quot; /&gt; &lt;dataHost name=&quot;localhost1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot; writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;writeHost host=&quot;hostM1&quot; url=&quot;centos6.
        </div>
        <div class="article-readmore"><a href="/series/db/mycat/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/db/redis/" class="article-titles">
          <h2 class="article-title">Redis</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          特点  单线程 # emecache多线程 no-sql 内存 # 请求不经过parser和optimizer(memcache也可以，但不支持排行榜和浮点数) key-value # memcache只有字符串，append字符串, blacklist删除麻烦 # key的命令上一般用:来分隔命名空间 string 整个或一部分操作 整数、浮点数自增自减 list 两边推入或弹出 偏移量trim 读单个多个元素 值查找移除元素 set 增删查单个元素 单个元素是否存在 交集、并集、差集 随机取元素 hash 增删查单个键值对 获取所有键值对 zset # 有序集合, 排序根据score, score为双精度浮点数 增删查单个元素 根据range或成员获取元素 c 编写 复制 持久化 # memcache不能持久化 point-in-time dump # 指定时间段内有指定数量的写操作时执行 dump-to-disk二条命令 append-only文件 从不同步 每秒同步一次 一命令同步一次 客户端分片 不完全事务  应用  primary storage(主存储) secondary storage(二级存储)  命令 文件命令 redis-server # 端口为6379 redis-server /etc/redis.
        </div>
        <div class="article-readmore"><a href="/series/db/redis/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/db/mongodb/" class="article-titles">
          <h2 class="article-title">Mongodb</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          特点  数据结构json(bson) 易写入，易修改 c++编写 分布式 介于关系数据库 和 非关系数据库之间 查询语句强 支持索引 bson格式  注意  document不能大于4Mb 可以非安全模式异步马上成功 每个连接用队列存储命令  数据结构定义  collection # 表 document # 记录 field(key, value) # 字段(field)与值(value) 与关系型数据库的区别 document中的field不要key俱全或一样 find()命令查询  bson的数据类型  ＃bson 是json的扩展 # 增加了数据类型 # 把json数据转换成二进制码存到文件 null boolean undefined 数组 # 如{gps: [20, 56]} 32位和64位整数 # shell中不支持 ## node.js python java等高级语言的驱动中支持 64位浮点 # shell使用的全是这种类型, 如{x:3.14} utf-8 # 字符串类型 ObjectID Date # 如{x:new Date()} 正则 # 如{x:/uspcat/i} javascript块代码 # 如{x:function(){}} ## 相当于存储过程 内嵌文档 # 如{x: {xx: &quot;a&quot;}} 二进制 # shell中不能使用  ObjectId  大小 12字节 显示为24个十六进制字符 # 空间换时间的思想 细节 前4字节是unix时间戳 后3字节集群machine hash 后2字节pid 后3字节inc自增计数器, 在前面都相等时全局自增  命名  数据库与集合名 不能是空字符串 特殊字符 ' (空格) , $ / \ \0 应该全小写 小于64字节 数据库名不与保留库名相同，如 admin, local, config 集合名 db-text合法，但不能db.
        </div>
        <div class="article-readmore"><a href="/series/db/mongodb/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/db/neo4j/" class="article-titles">
          <h2 class="article-title">Neo4j</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          

<h1 id="介绍">介绍</h1>

<pre><code>    使用zookeeper
</code></pre>

<h1 id="特点">特点</h1>

<pre><code>    完全兼容ACID
    主从复制
    副本从节点
            从节点写数据，先同步到主节点, 再由主节点分发
</code></pre>

<h1 id="配置">配置</h1>

<pre><code>dbms.connector.bolt.enabled=true
dbms.connector.bolt.listen_address=0.0.0.0:7687
dbms.connector.http.enabled=true
dbms.connector.http.listen_address=0.0.0.0:7474
        # 远程访问
</code></pre>

        </div>
        <div class="article-readmore"><a href="/series/db/neo4j/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/db/oracle/" class="article-titles">
          <h2 class="article-title">Oracle</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          启动：两个服务 OracleServiceORCL OracleOraDb11g_home1TNSListener  服务器的组成 oracle数据库 存储位置 oracle安装位置/oradata/ 每个数据库文件夹中有多个二进制文件（*.dbf） oracle实例(内存概念) 服务名 OracleService数据库名 # 实例操作数据库 # 实例包括多个进程与一个内存池(缓存)  工具 # 工具操作实例 sqlplus sqldeveloper  分布式 失败转移与负载平衡 多个服务器集成：集群 逐个连接服务器失败转移 根据每个服务器的特点分配连接进程数  Oracle认证 开发技术认证 Java认证 数据库开发语言SQL和PL/SQL认证 数据库技术认证 OCM【大师】 OCP【专家】 OCA【初级】 中间件技术认证 OracleServer认证，WEB服务器认证 专业领域技术认证 ERP CRM HR OA  版本 Oracle11g 用jdk6 8i 9i 10i # i 是internet 11g # g 是grid网格(一个请求多个服务器运行) 12c # cloud  端口 1521(lisener服务的端口号（停了以后再开会变）) netstat -a  权限 系统权限：创建数据库，创建用户 对象权限：表操作 sys create database权限 system 没有create database权限 scott hr 角色 # 超管以角色进入，普通用户输入用户名密码 dba dbaoperator  SQL99标准（不区分大小写） PLSQL是Oracle对SQl99标准的扩展 结构代查询语言 DML select,insert,update,delete DDL create table,alter table, drop table DCL grant select any table to scott, revoke select any select from scott TCL(老师编的) commit, rollback,rollback to savepoint  原理 oracle总体结构 1.
        </div>
        <div class="article-readmore"><a href="/series/db/oracle/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/db/mysql/" class="article-titles">
          <h2 class="article-title">Mysql</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          工具软件  mysql database mysql cluster 创建集群，配置复杂 mysql cluster manager cluster帮助软件，配置简单 mysql workbench 数据库建模工具 mysql utilities 提供一组命令行工具用于维护和管理 MySQL 服务器  端口  3306  包括  管理工具 (克隆、复制、比较、差异、导出、导入) 复制工具 (安装、配置) 一般工具 (磁盘使用情况、冗余索引、搜索元数据) mysql enterprise monitor documentation mysql enterprise monitor connector mysql enterprise monitor service manager mysql enterprise monitor agent mysql enterprise backup mysql connector  引擎  XtraDB MyISAM InnoDB  命令 mysql --max-relay-logs-size=300 # 中继日志大小(sql语句数) --relay-log-purge={0|1} # 中继日志自动清空 --relay-log-space-limit=0 # 限制中继日志大小,0表示无限制 services.
        </div>
        <div class="article-readmore"><a href="/series/db/mysql/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/db/postgres/" class="article-titles">
          <h2 class="article-title">Postgres</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          命令 initdb --locale en_US.UTF-8 -D 'data' postgres -D data # -p 6543 pg_ctl -D data -l a.log start postmaster # -D /data psql -d postgres # 默认创建的数据库，用户名为当前用户名 ＃ -h localhost -p 5432 -d dbname 用户名 密码 # -f 导入sql命令文件, 或者在末尾加 &lt; a.sql 来导入 # -L 导出日志文件 pg_dump -f a.sql -i -C -E UTF8 -n public -h localhost # 导出数据库 # -a 导出某表 createdb # -hlocalhost -Upostgres -O 用户名 数据库名 # 创建数据库并指定 owner dropdb # -U user dbname 元命令 \?
        </div>
        <div class="article-readmore"><a href="/series/db/postgres/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/architecture/heartbeat/" class="article-titles">
          <h2 class="article-title">Heartbeat</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          

<h1 id="2-0模块">2.0模块</h1>

<pre><code>    heartbeat: 节点间通信检测模块
    ha-logd: 集群事件日志服务
    CCM(Consensus CLuster Membership): 集群成员一致性管理模块
    LRM(Local Resource Manager): 本地资源管理模块
    Stonith Daemon: 使出现问题的节点从集群资源中脱离
    CRM(Cluster Resource management): 集群资源管理模块
    Cluster policy engine: 集群策略引擎
            用于实现节点与资源之间的管理与依赖关系
    Cluster transition  engine: 集群转移引擎
</code></pre>

<h1 id="3-0拆分之后的组成部分">3.0拆分之后的组成部分</h1>

<pre><code>    Heartbeat: 负责节点之间的通信
    Cluster Glue: 中间层，关联Heartbeat 与 Pacemaker,包含LRM 与 stonith
    Resource Agent: 控制服务启停，监控服务状态脚本集合，被LRM调用
    Pacemaker: 也就是曾经的CRM，包含了更多的功能
            管理接口:
                    crm shell 
                    一个使用ajax web 的web窗口
                    hb_gui图形工具
                    DRBD-MC, 一个基于java的工具
</code></pre>

<h1 id="版本差异">版本差异</h1>

<pre><code>    与1.x相比，2.1.x版本变化
            保留原来所有功能
            自动监控资源
            对各资源组进行独立监控
            同时监控系统负载
                    自动切换到负载低的node上
</code></pre>

        </div>
        <div class="article-readmore"><a href="/series/architecture/heartbeat/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/architecture/lvs/" class="article-titles">
          <h2 class="article-title">Lvs</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          介绍 第四层开始负载(可以建立到三层负载) 第四层负载 socket进必须连lvs  模式  tun # lvs负载均衡器将请求包发给物理服务器，后者将应答包直接发给用户 net # 请求和应答都经过lvs dr # 不要隧道结构的tun  使用 DR模式 centos6 yum install-y gcc gcc-c++ makepcre pcre-devel kernel-devel openssl-devel libnl-devel popt-devel modprobe -l |grep ipvs # 检查内核是否集成 echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward # 开启路由转发 安装ipvsadm http://www.linuxvirtualserver.org/software/kernel-2.6/ipvsadm-1.26.tar.gz 安装keepalived http://www.keepalived.org/software/keepalived-1.2.7.tar.gz ./configure --prefix=/usr/local/keepalived cp /usr/local/keepalived/etc/rc.d/init.d/keepalived /etc/init.d/ cp /usr/local/keepalived/etc/sysconfig/keepalived /etc/sysconfig/ mkdir /etc/keepalived/ cp /usr/local/keepalived/etc/keepalived/keepalived.conf /etc/keepalived/ cp /usr/local/keepalived/sbin/keepalived /usr/sbin/ o-&gt; 配置文件/etc/keepalived/keepalived.conf ! Configuration File forkeepalived global_defs { notification_email { test@sina.
        </div>
        <div class="article-readmore"><a href="/series/architecture/lvs/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/series/architecture/iscsi/" class="article-titles">
          <h2 class="article-title">Iscsi</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>October 11, 2018</time></li>
        </ul>
        <div class="article-content">
          

<h1 id="存储的概念和术语">存储的概念和术语</h1>

<pre><code>    scsi: 小型计算机系统接口(Small Computer System Interface)
    fc: 光纤通道(Fibre channel)
    das: 直连式存储(Direct-Attached Storage)
    nas: 网络接入存储(Network-Attached Storage)
    san: 存储区域网络(Storage Area Network)
            连接设备: 路由,  光纤交换机, 集线器(hub)
            接口: scsi fc
            通信协议: ip scsi

    iscsi: internet scsi
            优点
                    可以网络传输
                    服务器数量无限
                    在线扩容．动态部署
            架构
                    控制器架构: 专用数据传输芯片．专用RAID数据校验芯片．专用高性能cache缓存和专用嵌入式系统平台
                    iscsi连接桥架构: 
                            前端协议转换设备(硬件)
                            后端存储(scsi磁盘阵列．fc存储设备)
                    pc架构
                            存储设备搭建在pc服务器上，通过软件管理成iscsi, 通过网卡传输数据
                            实现
                                    以太网卡 + initiator软件
                                    toe网卡 + initiator软件
                                    iscsi HBA卡
            iscsi系统组成
                    iscsi initiator 或　iscsi hba
                    iscsi target
                    以太网交换机
                    一台或多台服务器
</code></pre>

        </div>
        <div class="article-readmore"><a href="/series/architecture/iscsi/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
    </section>
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/series/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/series/page/3/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/series/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/series/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/series/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/series/page/4/">4</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/series/page/5/">5</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item disabled"><span aria-hidden="true">&nbsp;&hellip;&nbsp;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/series/page/14/">14</a></li>
    
    
    <li class="page-item">
    <a href="/series/page/5/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/series/page/14/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

  </div>



<div class="site-footer">
  <div class="copyright">&copy; Copyright 2017 outrunJ</div>
  <ul class="site-footer-items">
    <li class="site-footer-item-rsslink">
      <a href="/series/index.xml" type="application/rss+xml" target="_blank" title="RSS">
        <i class="fas fa-rss"></i>
      </a>
    </li>
    <li class="site-footer-item-about"><a href="/about/" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>
<script src="/js/script.js"></script>
<script src="/js/custom.js"></script>


</body>
</html>
